<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    
    <title>Ruby 3.1.0 Preview 1 est disponible</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta itemprop="image" content="https://www.ruby-lang.org/images/header-ruby-logo@2x.png">
    
    <meta name="description" content="">
    

    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygments.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css">
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic&amp;subset=latin,cyrillic,greek,vietnamese' rel='stylesheet' type='text/css'>
    <link rel="canonical" href="https://www.ruby-lang.org/fr/news/2021/11/09/ruby-3-1-0-preview1-released/">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link href="/fr/feeds/news.rss" rel="alternate" title="Actualité récente (RSS)" type="application/rss+xml">


    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/page.js"></script>
    
  </head>

  

  <body>
    <div id="header">
      <div id="header_content" class="container">
        <a href="/fr/">
          <h1>Ruby</h1>
          <h2>A Programmer's Best Friend</h2>
        </a>

        <div class="site-links">
          

  <a href="/fr/" class="home">Home</a>

  <a href="/fr/downloads/">Téléchargements</a>

  <a href="/fr/documentation/">Documentation</a>

  <a href="/fr/libraries/">Bibliothèques</a>

  <a href="/fr/community/">Communauté</a>

  <a href="/fr/news/">Actualités</a>

  <a href="/fr/security/">Sécurité</a>

  <a href="/fr/about/">À propos de Ruby</a>


          <a href="#" class="menu selected">Menu</a>
        </div>

        <div id="search-box">
          
<form id="search-form" action="https://www.google.com/cse">
  <table class="fieldset">
    <tr>
      <td>
        <input class="field" type="text" name="q" size="31" style="background: white url(//www.google.com/coop/intl/fr/images/google_custom_search_watermark.gif) left no-repeat" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(//www.google.com/coop/intl/fr/images/google_custom_search_watermark.gif) left no-repeat'"/>
      </td>
      <td>
        <input type="hidden" name="cx" value="016749562256550695330:efcmgh3a1ac" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input class="button" type="submit" name="sa" value="Recherche" />
      </td>
    </tr>
  </table>
</form>

        </div>
      </div>
    </div>

    <div id="page">
      


      <div id="main-wrapper" class="container">
        <div id="main">
          

<div id="content-wrapper">
  
<h1>Ruby 3.1.0 Preview 1 est disponible</h1>



  <div id="content">
    <p class="post-info">Posté par naruse le 2021-11-09<br>
                         Traduit par Kevin Rosaz</p>

    <p>Nous avons le plaisir de vous annoncer la sortie de Ruby 3.1.0-preview1.</p>
<h2>YJIT: un nouveau compilateur JIT en cours de développement</h2>
<p>Ruby 3.1 fusionne YJIT, un nouveau compilateur JIT développé par Shopify.</p>
<p>Depuis que <a href="https://www.ruby-lang.org/en/news/2018/12/25/ruby-2-6-0-released/">Ruby 2.6 a introduit MJIT en 2018</a>, ses performances se sont grandement améliorées et <a href="https://www.ruby-lang.org/fr/news/2020/12/25/ruby-3-0-0-released/">nous sommes parvenus à Ruby3x3 l'année dernière</a>. Même si Optcarrot a montré des accélérations impressionnantes, le JIT n'a pas profité aux applications du monde professionnel.</p>
<p>Récemment, Shopify a apporté de nombreuses améliorations à Ruby pour accélérer son application Rails. YJIT est une contribution importante et vise à améliorer les performances des applications Rails.</p>
<p>Bien que MJIT soit un compilateur JIT basé sur des méthodes et qu'il utilise un compilateur C externe, YJIT utilise le Basic Block Versioning et inclut le compilateur JIT à l'intérieur. Avec Lazy Basic Block Versioning (LBBV), cela compile d'abord le début d'une méthode et compile progressivement le reste lorsque le type des arguments et des variables est déterminé dynamiquement. Voir <a href="https://dl.acm.org/doi/10.1145/3486606.3486781">YJIT: a basic block versioning JIT compiler for CRuby</a> pour une introduction détaillée.</p>
<p>Avec cette technologie, YJIT permet d'avoir à la fois un temps de démarrage rapide et des améliorations de performance sur la plupart des logiciels, jusqu'à 22% sur railsbench et 39% sur le rendu liquid.</p>
<!-- raw HTML omitted -->
<p>YJIT est toujours une fonctionnalité expérimentale. En tant que telle, elle est désactivée par défaut. Si vous souhaitez l'utiliser, spécifiez l'option en ligne de commande <code>--yjit</code> pour activer YJIT. L'utilisation est pour le moment limitée à macOS et Linux sur les plateformes x86-64.</p>
<ul>
<li>https://bugs.ruby-lang.org/issues/18229</li>
<li>https://shopify.engineering/yjit-just-in-time-compiler-cruby</li>
<li>https://www.youtube.com/watch?v=PBVLf3yfMs8</li>
</ul>
<h2>debug gem: un nouveau débogueur</h2>
<p>Un nouveau débogueur <a href="https://github.com/ruby/debug">debug.gem</a> est inclu. debug.gem est une implémentation rapide du débogueur et fournit de nombreuses fonctionnalités telles que le débogage à distance, un REPL coloré, une intégration dans un IDE (VSCode) et bien plus encore. Cela remplace <code>lib/debug.rb</code> de la bibliothèque standard.</p>
<h2>error_highlight: localisation des erreurs plus précise</h2>
<p>La gemme error_highlight a été ajoutée. Elle permet d'obtenir la localisation d'une erreur de manière plus précise dans la trace :</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ruby test.rb
test.rb:1:in `&lt;main&gt;': undefined method `time' for 1:Integer (NoMethodError)

1.time {}
 ^^^^^
Did you mean?  times
</code></pre></div></div>
<p>Cette gemme est activée par défaut. Vous pouvez la désactiver en utilisant l'option en ligne de commande <code>--disable-error_highlight</code>. Voir <a href="https://github.com/ruby/error_highlight">le dépôt</a> pour de plus amples informations.</p>
<h2>Amélioration d'IRB</h2>
<p>À décrire dans le prochain aperçu.</p>
<h2>Autres nouvelles fonctionnalités notables</h2>
<h3>Language</h3>
<ul>
<li>
<p>Les valeurs dans les littéraux de hachage peuvent être omis. [Feature #14579]</p>
<ul>
<li><code>{x:, y:}</code> est un sucre syntaxique de <code>{x: x, y: y}</code>.</li>
<li><code>foo(x:, y:)</code> est un sucre syntaxique de <code>foo(x: x, y: y)</code>.</li>
</ul>
</li>
<li>
<p>L'opérateur pin dans le filtrage par motif prend désormais une expression. [Feature #17411]</p>
</li>
</ul>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="no">Prime</span><span class="p">.</span><span class="nf">each_cons</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nf">lazy</span><span class="p">.</span><span class="nf">find_all</span><span class="p">{</span><span class="n">_1</span> <span class="k">in</span> <span class="p">[</span><span class="n">n</span><span class="p">,</span> <span class="o">^</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)]}.</span><span class="nf">take</span><span class="p">(</span><span class="mi">3</span><span class="p">).</span><span class="nf">to_a</span>
<span class="c1">#=&gt; [[3, 5], [5, 7], [11, 13]]</span>
</code></pre></div></div>
<h3>RBS</h3>
<p>RBS est un langage pour décrire la structure des programmes Ruby. Voir <a href="https://github.com/ruby/rbs">le dépôt</a> pour de plus amples informations.</p>
<p>Mises à jour depuis Ruby 3.0.0:</p>
<ul>
<li><code>rbs collection</code> a été introduite pour gérer les RBS des gemmes. <a href="https://github.com/ruby/rbs/blob/master/docs/collection.md">doc</a></li>
<li>Plusieurs signatures pour des bibliothèques intégrées et standards ont été ajoutées/mises à jour.</li>
<li>Il y a également de nombreuses corrections de bogues et d'améliorations de performance.</li>
</ul>
<p>Voir <a href="https://github.com/ruby/rbs/blob/master/CHANGELOG.md">le CHANGELOG.md</a> pour de plus amples informations.</p>
<h3>TypeProf</h3>
<p>TypeProf est un analyseur de type statique pour Ruby. Il génère un prototype de RBS à partir de code Ruby non annoté de type. Voir <a href="https://github.com/ruby/typeprof/blob/master/doc/doc.md">le document</a> pour de plus amples informations.</p>
<p>Mises à jour depuis Ruby 3.0.0 :</p>
<ul>
<li><a href="https://github.com/ruby/typeprof/blob/master/doc/ide.md">Le support expérimental pour IDE</a> a été implémenté.</li>
<li>Il y a également de nombreuses corrections de bogues et d'améliorations de performance.</li>
</ul>
<h2>Amélioration de performance</h2>
<ul>
<li>MJIT
<ul>
<li>Pour les charges de travail telles que Rails, la valeur par défaut <code>--jit-max-cache</code> passe de 100 à 10000.
Le compilateur JIT ne saute plus la compilation des méthodes de plus de 1000 instructions.</li>
<li>Pour prendre en charge Zeitwerk de Rails, le code généré par le compilateur JIT n'est plus annulé
lorsqu'un TracePoint est activé pour les évènements de classe.</li>
</ul>
</li>
</ul>
<h2>Autres changements notables depuis la version 3.0</h2>
<ul>
<li>Le filtrage par motif en une ligne, e.g., <code>ary =&gt; [x, y, z]</code>, n'est plus au stade expérimental.</li>
<li>L'ordre d'évaluation des affectations multiples a été légèrement modifié. <a href="https://bugs.ruby-lang.org/issues/4443">[Bug #4443]</a>
<ul>
<li><code>foo[0], bar[0] = baz, qux</code> était évalué dans l'ordre <code>baz</code>, <code>qux</code>, <code>foo</code> puis <code>bar</code> dans Ruby 3.0. Dans Ruby 3.1, l'évaluation est dans l'ordre <code>foo</code>, <code>bar</code>, <code>baz</code> puis <code>qux</code>.</li>
</ul>
</li>
<li>Allocation de la taille d'une variable: Strings (expérimental) <a href="https://bugs.ruby-lang.org/issues/18239">[Bug #18239]</a></li>
</ul>
<h3>Mises à jour des bibliothèques standards</h3>
<ul>
<li>Plusieurs bibliothèques standards ont été mises à jour.
<ul>
<li>RubyGems</li>
<li>Bundler</li>
<li>RDoc 6.4.0</li>
<li>ReLine</li>
<li>JSON 2.6.0</li>
<li>Psych 4.0.2</li>
<li>FileUtils 1.6.0</li>
<li>Fiddle</li>
<li>StringIO 3.0.1</li>
<li>IO::Console 0.5.9</li>
<li>IO::Wait 0.2.0</li>
<li>CSV</li>
<li>Etc 1.3.0</li>
<li>Date 3.2.0</li>
<li>Zlib 2.1.1</li>
<li>StringScanner</li>
<li>IpAddr</li>
<li>Logger 1.4.4</li>
<li>OStruct 0.5.0</li>
<li>Irb</li>
<li>Racc 1.6.0</li>
<li>Delegate 0.2.0</li>
<li>Benchmark 0.2.0</li>
<li>CGI 0.3.0</li>
<li>Readline(C-ext) 0.1.3</li>
<li>Timeout 0.2.0</li>
<li>YAML 0.2.0</li>
<li>URI 0.11.0</li>
<li>OpenSSL</li>
<li>DidYouMean</li>
<li>Weakref 0.1.1</li>
<li>Tempfile 0.1.2</li>
<li>TmpDir 0.1.2</li>
<li>English 0.7.1</li>
<li>Net::Protocol 0.1.2</li>
<li>Net::Http 0.2.0</li>
<li>BigDecimal</li>
<li>OptionParser 0.2.0</li>
<li>Set</li>
<li>Find 0.1.1</li>
<li>Rinda 0.1.1</li>
<li>Erb</li>
<li>NKF 0.1.1</li>
<li>Base64 0.1.1</li>
<li>OpenUri 0.2.0</li>
<li>SecureRandom 0.1.1</li>
<li>Resolv 0.2.1</li>
<li>Resolv::Replace 0.1.0</li>
<li>Time 0.2.0</li>
<li>PP 0.2.1</li>
<li>Prettyprint 0.1.1</li>
<li>Drb 2.1.0</li>
<li>Pathname 0.2.0</li>
<li>Digest 3.1.0.pre2</li>
<li>Un 0.2.0</li>
</ul>
</li>
<li>Les gemmes incluses suivantes ont été mises à jour.
<ul>
<li>minitest 5.14.4</li>
<li>power_assert 2.0.1</li>
<li>rake 13.0.6</li>
<li>test-unit 3.5.0</li>
<li>rbs 1.6.2</li>
<li>typeprof 0.20.0</li>
</ul>
</li>
<li>Les gemmes par défaut suivantes sont désormais incluses.
<ul>
<li>net-ftp</li>
<li>net-imap</li>
<li>net-pop</li>
<li>net-smtp</li>
<li>matrix</li>
<li>prime</li>
</ul>
</li>
</ul>
<p>Voir <a href="https://github.com/ruby/ruby/blob/v3_1_0_preview1/NEWS.md">NEWS</a>
ou les <a href="https://github.com/ruby/ruby/compare/v3_0_0...v3_1_0_preview1">logs de commit</a>
pour de plus amples informations.</p>
<p>Avec ces changements, <a href="https://github.com/ruby/ruby/compare/v3_0_0...v3_1_0_preview1#file_bucket">2963 fichiers changés, 529321 insertions(+), 92305 suppressions(-)</a>
depuis Ruby 3.0.0!</p>
<h2>Téléchargement</h2>
<ul>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/3.1/ruby-3.1.0-preview1.tar.gz">https://cache.ruby-lang.org/pub/ruby/3.1/ruby-3.1.0-preview1.tar.gz</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE: 20821221
SHA1: 40dfd3db076a49fab9a0eee51e89d9b3d16a4e23
SHA256: 540f49f4c3aceb1a5d7fb0b8522a04dd96bc4a22f9660a6b59629886c8e010d4
SHA512: 63f528f20905827d03649ed9804e4a4e5c15078f9c6c8efcfb306baa7baafa17a406eb09a2c08b42e151e14af33b1aadbd9fb1cc84f9353d070b54bbf1ff950d
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/3.1/ruby-3.1.0-preview1.tar.xz">https://cache.ruby-lang.org/pub/ruby/3.1/ruby-3.1.0-preview1.tar.xz</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE: 15742844
SHA1: 22aa861b17031cd1b163b7443f5f2f5897c5895e
SHA256: 86a836ad42f6a7a469fce71ffec48fd3184af55bf79e488b568a4f64adee551d
SHA512: bdbd7c624197ca478658280d84123a8c12ae72425bc566dcc75989c5b5ef114dd57e64efc09e2413ed615d9b47621a70ace0f3612e8ca7ba853822ad9e88c0b0
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/3.1/ruby-3.1.0-preview1.zip">https://cache.ruby-lang.org/pub/ruby/3.1/ruby-3.1.0-preview1.zip</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE: 25019629
SHA1: ef5fa22890e55935db4b96b3089a8aea1335bd85
SHA256: 4e8d118b2365164873148ac545a8fa36c098b846a9b19ebb9037f8ee9adb4414
SHA512: 917803aac0848e00871614a09740b5c9cca26f200d68580dde61666633f1b7fee506e25ea4ed0c38eb20149417bf9f1ed449a4d2aec5b726de670e7177e5c07a
</code></pre></div></div>
</li>
</ul>
<h2>Ruby, c'est quoi ?</h2>
<p>Ruby a été initialement développé par Matz (Yukihiro Matsumoto) en 1993 puis est devenu open source. Il fonctionne sur de nombreuses plateformes et est utilisé partout dans le monde, en particulier pour le développement web.</p>

  </div>
</div>
<hr class="hidden-modern" />

<div id="sidebar-wrapper">
  <div id="sidebar">
    <div class="navigation">
      

      <h3><strong>Actualité récente</strong></h3>

      <ul class="menu">
        
        <li><a href="/fr/news/2022/02/18/ruby-3-1-1-released/">Ruby 3.1.1 est disponible</a></li>
        
        <li><a href="/fr/news/2021/12/25/ruby-3-1-0-released/">Ruby 3.1.0 est disponible</a></li>
        
        <li><a href="/fr/news/2021/11/24/ruby-3-0-3-released/">Ruby 3.0.3 est disponible</a></li>
        
        <li><a href="/fr/news/2021/11/24/ruby-2-7-5-released/">Ruby 2.7.5 est disponible</a></li>
        
        <li><a href="/fr/news/2021/11/24/ruby-2-6-9-released/">Ruby 2.6.9 est disponible</a></li>
        
      </ul>
    </div>

    

    <h3>Syndication</h3>
    <p><a href="/fr/feeds/news.rss">Actualité récente (RSS)</a></p>
  </div>
</div>
<hr class="hidden-modern" />

        </div>
      </div>
    </div>

    <div class="container">
      <div id="footer">
        <div class="site-links">
          

  <a href="/fr/" class="home">Home</a>

  <a href="/fr/downloads/">Téléchargements</a>

  <a href="/fr/documentation/">Documentation</a>

  <a href="/fr/libraries/">Bibliothèques</a>

  <a href="/fr/community/">Communauté</a>

  <a href="/fr/news/">Actualités</a>

  <a href="/fr/security/">Sécurité</a>

  <a href="/fr/about/">À propos de Ruby</a>


        </div>

        <p>

  Autres langues disponibles :

<a href="/bg/">Български</a>,
<a href="/de/">Deutsch</a>,
<a href="/en/">English</a>,
<a href="/es/">Español</a>,
<a href="/fr/">Français</a>,
<a href="/id/">Bahasa Indonesia</a>,
<a href="/it/">Italiano</a>,
<a href="/ja/">日本語</a>,
<a href="/ko/">한국어</a>,
<a href="/pl/">polski</a>,
<a href="/pt/">Português</a>,
<a href="/ru/">Русский</a>,
<a href="/tr/">Türkçe</a>,
<a href="/vi/">Tiếng Việt</a>,
<a href="/zh_cn/">简体中文</a>,
<a href="/zh_tw/">繁體中文</a>.
</p>

        
  <p>Ce site est propulsé par Ruby et <a href="http://www.jekyllrb.com/">Jekyll</a>. Il est fièrement maintenu par des membres de la communauté Ruby. Contribuez en vous rendant sur <a href="https://github.com/ruby/www.ruby-lang.org/">GitHub</a> ou contactez le <a href="mailto:webmaster@ruby-lang.org">webmaster</a> pour toute question ou tout commentaire.</p>


      </div>
    </div>
  </body>
</html>
