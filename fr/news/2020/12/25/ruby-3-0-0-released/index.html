<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    
    <title>Ruby 3.0.0 est disponible</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta itemprop="image" content="https://www.ruby-lang.org/images/header-ruby-logo@2x.png">
    
    <meta name="description" content="">
    

    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygments.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css">
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic&amp;subset=latin,cyrillic,greek,vietnamese' rel='stylesheet' type='text/css'>
    <link rel="canonical" href="https://www.ruby-lang.org/fr/news/2020/12/25/ruby-3-0-0-released/">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link href="/fr/feeds/news.rss" rel="alternate" title="Actualité récente (RSS)" type="application/rss+xml">


    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/page.js"></script>
    
  </head>

  

  <body>
    <div id="header">
      <div id="header_content" class="container">
        <a href="/fr/">
          <h1>Ruby</h1>
          <h2>A Programmer's Best Friend</h2>
        </a>

        <div class="site-links">
          

  <a href="/fr/" class="home">Home</a>

  <a href="/fr/downloads/">Téléchargements</a>

  <a href="/fr/documentation/">Documentation</a>

  <a href="/fr/libraries/">Bibliothèques</a>

  <a href="/fr/community/">Communauté</a>

  <a href="/fr/news/">Actualités</a>

  <a href="/fr/security/">Sécurité</a>

  <a href="/fr/about/">À propos de Ruby</a>


          <a href="#" class="menu selected">Menu</a>
        </div>

        <div id="search-box">
          
<form id="search-form" action="https://www.google.com/cse">
  <table class="fieldset">
    <tr>
      <td>
        <input class="field" type="text" name="q" size="31" style="background: white url(//www.google.com/coop/intl/fr/images/google_custom_search_watermark.gif) left no-repeat" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(//www.google.com/coop/intl/fr/images/google_custom_search_watermark.gif) left no-repeat'"/>
      </td>
      <td>
        <input type="hidden" name="cx" value="016749562256550695330:efcmgh3a1ac" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input class="button" type="submit" name="sa" value="Recherche" />
      </td>
    </tr>
  </table>
</form>

        </div>
      </div>
    </div>

    <div id="page">
      


      <div id="main-wrapper" class="container">
        <div id="main">
          

<div id="content-wrapper">
  
<h1>Ruby 3.0.0 est disponible</h1>



  <div id="content">
    <p class="post-info">Posté par naruse le 2020-12-25<br>
                         Traduit par chatpitre</p>

    <p>Nous avons le plaisir de vous annoncer la sortie de Ruby 3.0.0. Nous avons travaillé dur pour atteindre Ruby 3 dont les objectifs sont la performance, la concurrence et le typage. Surtout en ce qui concerne les performances, Matz a déclaré que &quot;Ruby3 sera trois fois plus rapide que Ruby2&quot; a.k.a. <a href="https://blog.heroku.com/ruby-3-by-3">Ruby 3x3</a>.</p>
<!-- raw HTML omitted -->
<p>Avec <a href="https://github.com/mame/optcarrot">Optcarrot benchmark</a> qui mesure les performances d'un seul thread basé sur la charge de travail de l'émulation d'un jeu NES, Ruby 3.0 a atteint des performances trois fois plus rapide que Ruby 2.0 ! <!-- raw HTML omitted -->Les mesures ont été réalisées dans l'environnement suivant : <a href="https://benchmark-driver.github.io/hardware.html">benchmark-driver.github.io/hardware.html</a>. <a href="https://github.com/ruby/ruby/commit/8c510e4095">Commit 8c510e4095</a> a été utilisé comme Ruby 3.0. Cela peut ne pas être trois fois plus rapide en fonction de votre environnement ou benchmark.<!-- raw HTML omitted --></p>
<p>Ruby 3.0.0 couvre les objectifs de :</p>
<ul>
<li>Performance
<ul>
<li>MJIT</li>
</ul>
</li>
<li>Concurrence
<ul>
<li>Ractor</li>
<li>Fiber Scheduler</li>
</ul>
</li>
<li>Typage (Analyse statique)
<ul>
<li>RBS</li>
<li>TypeProf</li>
</ul>
</li>
</ul>
<p>Avec le gain de performance, Ruby 3.0 amène de nouvelles fonctionnalités (décrites ci-dessous).</p>
<h2>Performance</h2>
<blockquote>
<p>Quand j'ai déclaré &quot;Ruby3x3&quot; pour la première fois dans le discours d'ouverture de la conférence, de nombreux membres de la core team ont estimé que &quot;Matz est un vantard&quot;. En fait, j'en avais aussi l'impression. Mais nous l'avons fait. Je suis honoré de voir ce que la core team a réellement accomplie pour rendre Ruby3.0 trois fois plus rapide que Ruby2.0 (dans certains benchmarks). -- Matz</p>
</blockquote>
<h3>MJIT</h3>
<p>Plusieurs améliorations ont été implémentées dans MJIT. Voir News pour plus de détails.</p>
<p>A partir de Ruby 3.0, JIT est censé améliorer les performances des charges de travail limitées telles que les jeux (<a href="https://benchmark-driver.github.io/benchmarks/optcarrot/commits.html#chart-1">Optcarrot</a>), l'IA (<a href="https://benchmark-driver.github.io/benchmarks/rubykon/commits.html">Rubykon</a>), ou n'importe quelle application qui passe la majorité de son temps à appeler quelques méthodes de nombreuse fois.</p>
<p>Bien que Ruby 3.0 <a href="https://twitter.com/k0kubun/status/1256142302608650244">ait considérablement réduit la taille du code JIT</a>, il n'est toujours pas prêt pour optimiser des charges de travail comme Rails, qui passe souvent du temps sur tant de méthodes qu'il souffre de problèmes d'i-cache exacerbés par JIT. Restez à l'écoute de Ruby 3.1 pour d'autres améliorations sur ce problème.</p>
<h2>Concurrence / Parallèle</h2>
<blockquote>
<p>Aujourd'hui est l'ère du multi-cœur. La concurrence est très importante. Avec Ractor et Async Fiber, Ruby sera un véritable langage concurrent. --- Matz</p>
</blockquote>
<h3>Ractor (expérimental)</h3>
<p>Ractor est un modèle d'acteur permettant une abstraction pour la concurrence. Il fournit un outil permettant l'exécution de code de façon thread-safe.</p>
<p>Vous pouvez créer plusieurs ractors et les lancer en parallèle. Ractor vous permet de créer des programmes thread-safe puisque les ractors ne partagent pas d'objets normaux. La communication entre ractors se fait par passage de messages.</p>
<p>Afin de limiter le partage d'objet, Ractor introduit plusieurs restrictions sur la syntaxe de Ruby (sans plusieurs ractors, il n'y a pas de restriction).</p>
<p>La spécification et l'implémentation ne sont pas matures et pourront donc changer. Cette fonctionnalité est marquée comme expérimentale et montre l'avertissement &quot;experimental feature&quot; au premier <code>Ractor.new</code>.</p>
<p>Le bout de code suivant mesure le temps d'exécution du célèbre benchmark de (<a href="https://fr.wikipedia.org/wiki/Fonction_de_Takeuchi">la fonction de Takeuchi - Wikipedia</a>) en l'exécutant quatre fois de façon séquentielle ou quatre fois en parallèle avec des ractors.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="k">def</span> <span class="nf">tarai</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span> <span class="o">=</span>
  <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="p">?</span> <span class="n">y</span> <span class="p">:</span> <span class="n">tarai</span><span class="p">(</span><span class="n">tarai</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">),</span>
                     <span class="n">tarai</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">x</span><span class="p">),</span>
                     <span class="n">tarai</span><span class="p">(</span><span class="n">z</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
<span class="nb">require</span> <span class="s1">'benchmark'</span>
<span class="no">Benchmark</span><span class="p">.</span><span class="nf">bm</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
  <span class="c1"># sequential version</span>
  <span class="n">x</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s1">'seq'</span><span class="p">){</span> <span class="mi">4</span><span class="p">.</span><span class="nf">times</span><span class="p">{</span> <span class="n">tarai</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">}</span> <span class="p">}</span>

  <span class="c1"># parallel version</span>
  <span class="n">x</span><span class="p">.</span><span class="nf">report</span><span class="p">(</span><span class="s1">'par'</span><span class="p">){</span>
    <span class="mi">4</span><span class="p">.</span><span class="nf">times</span><span class="p">.</span><span class="nf">map</span> <span class="k">do</span>
      <span class="no">Ractor</span><span class="p">.</span><span class="nf">new</span> <span class="p">{</span> <span class="n">tarai</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">}</span>
    <span class="k">end</span><span class="p">.</span><span class="nf">each</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:take</span><span class="p">)</span>
  <span class="p">}</span>
<span class="k">end</span>
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Benchmark result:
          user     system      total        real
seq  64.560736   0.001101  64.561837 ( 64.562194)
par  66.422010   0.015999  66.438009 ( 16.685797)
</code></pre></div></div>
<p>Les résultats sont mesurés sur Ubuntu 20.04, Intel(R) Core(TM) i7-6700 (4 cores, 8 hardware threads). Cela montre que la version exécutée en parallèle est 3.87 fois plus rapide que la version séquentielle.</p>
<p>Voir <a href="https://docs.ruby-lang.org/en/3.0/ractor_md.html">doc/ractor.md</a> pour plus de détails.</p>
<h3>Fiber Scheduler</h3>
<p><code>Fiber#scheduler</code> est introduit pour intercepter des opérations de blocage. Cela permet une concurrence légère sans changer le code existant. Voir <a href="https://www.youtube.com/watch?v=Y29SSOS4UOc">&quot;Don't Wait For Me, Scalable Concurrency for Ruby 3&quot;</a> pour avoir un aperçu du fonctionnement.</p>
<p>Les classes et méthodes prises en charge :</p>
<ul>
<li><code>Mutex#lock</code>, <code>Mutex#unlock</code>, <code>Mutex#sleep</code></li>
<li><code>ConditionVariable#wait</code></li>
<li><code>Queue#pop</code>, <code>SizedQueue#push</code></li>
<li><code>Thread#join</code></li>
<li><code>Kernel#sleep</code></li>
<li><code>Process.wait</code></li>
<li><code>IO#wait</code>, <code>IO#read</code>, <code>IO#write</code> et les méthodes rattachées (e.g. <code>#wait_readable</code>, <code>#gets</code>, <code>#puts</code> etc.)</li>
<li><code>IO#select</code> n'est <em>pas prise en charge</em>.</li>
</ul>
<p>Cet exemple de code permet de faire plusieurs requêtes HTTP de façon concurrente.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="nb">require</span> <span class="s1">'async'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'uri'</span>

<span class="no">Async</span> <span class="k">do</span>
  <span class="p">[</span><span class="s2">"ruby"</span><span class="p">,</span> <span class="s2">"rails"</span><span class="p">,</span> <span class="s2">"async"</span><span class="p">].</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">topic</span><span class="o">|</span>
    <span class="no">Async</span> <span class="k">do</span>
      <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="no">URI</span> <span class="s2">"https://www.google.com/search?q=</span><span class="si">#{</span><span class="n">topic</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>
<p>Cela utilise <a href="https://github.com/socketry/async">async</a> qui fournit la boucle d'évènements. Cette boucle utilise les hooks <code>Fiber#scheduler</code> pour rendre <code>Net::HTTP</code> non bloquant. D'autres gemmes peuvent utiliser cette interface afin de fournir une exécution non bloquante à Ruby et peuvent être compatibles avec d'autres implémentations de Ruby (par exemple, JRuby, TruffleRuby) qui peuvent prendre en charge les mêmes hooks non bloquants.</p>
<h2>Analyse statique</h2>
<blockquote>
<p>Les années 2010 ont été une ère de langages de programmation statiquement typés. Ruby souhaite un futur avec de la vérification de type statique, sans déclaration de type, en utilisant une interprétation abstraite. RBS et TypeProf sont la première étape vers le futur. D'autres étapes sont à venir. --- Matz</p>
</blockquote>
<h3>RBS</h3>
<p>RBS est un langage qui décrit les types de programmes Ruby.</p>
<p>Les vérificateurs de type, y compris TypeProf et d'autres outils prenant en charge RBS, comprendront mieux les programmes Ruby avec des définitions RBS.</p>
<p>Vous pouvez écrire la définition des classes et des modules: les méthodes qui sont définies dans la classe, les variables d'instance et leurs types, et les relations d'héritage / mix-in.</p>
<p>Le but de RBS est de prendre en charge les modèles couramment observés dans les programmes Ruby et de vous permettre d'écrire des types avancés, notamment les unions de type, les surcharges de méthode et les génériques. Il prend également en charge le duck typing avec <em>interface types</em>.</p>
<p>Ruby 3.0 arrive avec la gemme <code>rbs</code>, qui inclue l'analyse et le traitement des définitions de type écrites en RBS.</p>
<p>Le code ci-dessous est un petit exemple de RBS une classe, un module et des définitions de constantes.</p>
<div class="language-rbs highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="rbs">module ChatApp
  VERSION: String
  class Channel
    attr_reader name: String
    attr_reader messages: Array[Message]
    attr_reader users: Array[User | Bot]              # `|` means union types, `User` or `Bot`.
    def initialize: (String) -&gt; void
    def post: (String, from: User | Bot) -&gt; Message   # Method overloading is supported.
            | (File, from: User | Bot) -&gt; Message
  end
end
</code></pre></div></div>
<p>Voir le <a href="https://github.com/ruby/rbs">README de la gemme rbs</a> pour plus de détails.</p>
<h3>TypeProf</h3>
<p>TypeProf est un outil d'analyse de type inclus dans Ruby.</p>
<p>Actuellement, TypeProf permet une sorte d'inférence de type.</p>
<p>Il lit du code Ruby sans annotation de type, analyse quelles méthodes sont définies, comment elles sont utilisées et génère un prototype de la signature de type au format RBS.</p>
<p>Voici une simple démo de TypeProf.</p>
<p>Un exemple d'entrée :</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="c1"># test.rb</span>
<span class="k">class</span> <span class="nc">User</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">:,</span> <span class="n">age</span><span class="p">:)</span>
    <span class="vi">@name</span><span class="p">,</span> <span class="vi">@age</span> <span class="o">=</span> <span class="nb">name</span><span class="p">,</span> <span class="n">age</span>
  <span class="k">end</span>
  <span class="nb">attr_reader</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:age</span>
<span class="k">end</span>
<span class="no">User</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">name: </span><span class="s2">"John"</span><span class="p">,</span> <span class="ss">age: </span><span class="mi">20</span><span class="p">)</span>
</code></pre></div></div>
<p>Un exemple de sortie :</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ typeprof test.rb
# Classes
class User
  attr_reader name : String
  attr_reader age : Integer
  def initialize : (name: String, age: Integer) -&gt; [String, Integer]
end
</code></pre></div></div>
<p>Vous pouvez lancer TypeProf en sauvegadant le code dans un fichier &quot;test.rb&quot; et en appelant la commande &quot;typeprof test.rb&quot;.</p>
<p>Vous pouvez aussi <a href="https://mame.github.io/typeprof-playground/#rb=%23+test.rb%0Aclass+User%0A++def+initialize%28name%3A%2C+age%3A%29%0A++++%40name%2C+%40age+%3D+name%2C+age%0A++end%0A++%0A++attr_reader+%3Aname%2C+%3Aage%0Aend%0A%0AUser.new%28name%3A+%22John%22%2C+age%3A+20%29&amp;rbs=">essayer TypeProf en ligne</a>. (Cela lance TypeProf coté serveur, donc désolé si cela ne fonctionne pas !)</p>
<p>Voir <a href="https://github.com/ruby/typeprof/blob/master/doc/doc.md">la documentation</a> et <a href="https://github.com/ruby/typeprof/blob/master/doc/demo.md">les démos</a> pour plus de détails.</p>
<p>TypeProf est expérimental et n'est pas encore mature. Seulement un sous ensemble du langage Ruby est supporté et la détection des erreurs de typage est limitée. Mais il continue de croître rapidement pour améliorer la couverture des fonctionnalités du langage, les performances d'analyse et la convivialité. Tout commentaire est le bienvenu.</p>
<h2>Autres ajouts notables</h2>
<ul>
<li>
<p>Le filtrage par motif en une ligne est changé (expérimental).</p>
<ul>
<li>
<p><code>=&gt;</code> est ajouté. Il peut être utilisé comme une affectation à droite.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="mi">0</span> <span class="o">=&gt;</span> <span class="n">a</span>
<span class="nb">p</span> <span class="n">a</span> <span class="c1">#=&gt; 0</span>

<span class="p">{</span><span class="ss">b: </span><span class="mi">0</span><span class="p">,</span> <span class="ss">c: </span><span class="mi">1</span><span class="p">}</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="n">b</span><span class="p">:}</span>
<span class="nb">p</span> <span class="n">b</span> <span class="c1">#=&gt; 0</span>
</code></pre></div></div>
</li>
<li>
<p><code>in</code> est changé pour retourner <code>true</code> ou <code>false</code>.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="c1"># version 3.0</span>
<span class="mi">0</span> <span class="k">in</span> <span class="mi">1</span> <span class="c1">#=&gt; false</span>

<span class="c1"># version 2.7</span>
<span class="mi">0</span> <span class="k">in</span> <span class="mi">1</span> <span class="c1">#=&gt; raise NoMatchingPatternError</span>
</code></pre></div></div>
</li>
</ul>
</li>
<li>
<p>Le pattern Find est ajouté (expérimental).</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="k">case</span> <span class="p">[</span><span class="s2">"a"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">"d"</span><span class="p">,</span> <span class="s2">"e"</span><span class="p">,</span> <span class="s2">"f"</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="k">in</span> <span class="p">[</span><span class="o">*</span><span class="n">pre</span><span class="p">,</span> <span class="no">String</span> <span class="o">=&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="no">String</span> <span class="o">=&gt;</span> <span class="n">y</span><span class="p">,</span> <span class="o">*</span><span class="n">post</span><span class="p">]</span>
  <span class="nb">p</span> <span class="n">pre</span>  <span class="c1">#=&gt; ["a", 1]</span>
  <span class="nb">p</span> <span class="n">x</span>    <span class="c1">#=&gt; "b"</span>
  <span class="nb">p</span> <span class="n">y</span>    <span class="c1">#=&gt; "c"</span>
  <span class="nb">p</span> <span class="n">post</span> <span class="c1">#=&gt; [2, "d", "e", "f", 3]</span>
<span class="k">end</span>
</code></pre></div></div>
</li>
<li>
<p>La définition de méthode sans le mot clé <code>end</code> est ajoutée.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span>
</code></pre></div></div>
</li>
<li>
<p><code>Hash#except</code> est désormais inclus.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="n">h</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">a: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">b: </span><span class="mi">2</span><span class="p">,</span> <span class="ss">c: </span><span class="mi">3</span> <span class="p">}</span>
<span class="nb">p</span> <span class="n">h</span><span class="p">.</span><span class="nf">except</span><span class="p">(</span><span class="ss">:a</span><span class="p">)</span> <span class="c1">#=&gt; {:b=&gt;2, :c=&gt;3}</span>
</code></pre></div></div>
</li>
<li>
<p>Memory view est ajoutée en tant que fonctionnalité expérimentale</p>
<ul>
<li>C'est un nouvel ensemble d'API C pour échanger une zone mémoire brute, comme un tableau de nombre ou une image bitmap, entre des bibliothèques d'extension. Les bibliothèques d'extension peuvent également partager les méta données de la zone mémoire comprenant la forme, le format de l'élément, etc. En utilisant ce type de métadonnées, les librairies d'extension peuvent même partager des tableaux multidimensionnels de façon appropriée. Cette fonctionnalité a été conçue en utilisant le protocole tampon de python.</li>
</ul>
</li>
</ul>
<h2>Amélioration des performances</h2>
<ul>
<li>Coller du code dans IRB est 53 fois plus rapide qu'en Ruby 2.7.0. Par exemple, le temps nécessaire pour coller <a href="https://gist.github.com/aycabta/30ab96334275bced5796f118c9220b0b">cet exemple de code</a> passe de 11.7 secondes à 0.22 secondes.</li>
</ul>
<!-- raw HTML omitted -->
<ul>
<li>
<p>La commande <code>measure</code> est ajoutée à IRB. Elle permet simplement de mesurer le temps.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>irb(main):001:0&gt; 3
=&gt; 3
irb(main):002:0&gt; measure
TIME is added.
=&gt; nil
irb(main):003:0&gt; 3
processing time: 0.000058s
=&gt; 3
irb(main):004:0&gt; measure :off
=&gt; nil
irb(main):005:0&gt; 3
=&gt; 3
</code></pre></div></div>
</li>
</ul>
<h2>Autres changements notables depuis la version 2.7</h2>
<ul>
<li>
<p>Les arguments de mot-clé sont séparés des autres arguments.</p>
<ul>
<li>
<p>En principe, le code qui affiche un avertissement dans la version 2.7 de Ruby ne fonctionnera pas. Voir le <a href="https://www.ruby-lang.org/en/news/2019/12/12/separation-of-positional-and-keyword-arguments-in-ruby-3-0/">document</a> pour plus de détails.</p>
</li>
<li>
<p>La transmission d'arguments prend désormais en charge les arguments principaux.</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code data-lang="ruby"><span class="k">def</span> <span class="nf">method_missing</span><span class="p">(</span><span class="n">meth</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
  <span class="nb">send</span><span class="p">(</span><span class="ss">:"do_</span><span class="si">#{</span> <span class="n">meth</span> <span class="si">}</span><span class="ss">"</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div>
</li>
</ul>
</li>
<li>
<p>Le filtrage par motif (<code>case</code>/<code>in</code>) n'est plus expérimentale.</p>
<ul>
<li>Voir la <a href="https://docs.ruby-lang.org/en/3.0/syntax/pattern_matching_rdoc.html">documentation du filtrage par motif</a> pour plus de détails.</li>
</ul>
</li>
<li>
<p>La fonctionnalité <code>$SAFE</code> a été completement supprimée. C'est désormais une variable globale.</p>
</li>
<li>
<p>L'ordre de la backtrace a été inversé depuis la version 2.5 de Ruby, mais cela a été remis comme avant. Cela se comporte comme la version 2.4 de Ruby. Le message d'erreur et le numéro de ligne où l'exception apparait sont affichés en premiers. Les appelants sont affichés après.</p>
</li>
<li>
<p>Plusieurs bibliothèques standard ont été mises à jour.</p>
<ul>
<li>RubyGems 3.2.3</li>
<li>Bundler 2.2.3</li>
<li>IRB 1.3.0</li>
<li>Reline 0.2.0</li>
<li>Psych 3.3.0</li>
<li>JSON 2.5.1</li>
<li>BigDecimal 3.0.0</li>
<li>CSV 3.1.9</li>
<li>Date 3.1.0</li>
<li>Digest 3.0.0</li>
<li>Fiddle 1.0.6</li>
<li>StringIO 3.0.0</li>
<li>StringScanner 3.0.0</li>
<li>etc.</li>
</ul>
</li>
<li>
<p>Les librairies suivantes ne sont plus incluses. Il faut installer les gemmes correspondantes pour utiliser leurs fonctionnalitées.</p>
<ul>
<li>sdbm</li>
<li>webrick</li>
<li>net-telnet</li>
<li>xmlrpc</li>
</ul>
</li>
<li>
<p>Les gemmes suivantes sont désormais incluses avec Ruby.</p>
<ul>
<li>rexml</li>
<li>rss</li>
</ul>
</li>
<li>
<p>Les fichiers stdlib suivants sont désormais des gemmes et sont disponibles sur rubygems.org.</p>
<ul>
<li>English</li>
<li>abbrev</li>
<li>base64</li>
<li>drb</li>
<li>debug</li>
<li>erb</li>
<li>find</li>
<li>net-ftp</li>
<li>net-http</li>
<li>net-imap</li>
<li>net-protocol</li>
<li>open-uri</li>
<li>optparse</li>
<li>pp</li>
<li>prettyprint</li>
<li>resolv-replace</li>
<li>resolv</li>
<li>rinda</li>
<li>set</li>
<li>securerandom</li>
<li>shellwords</li>
<li>tempfile</li>
<li>tmpdir</li>
<li>time</li>
<li>tsort</li>
<li>un</li>
<li>weakref</li>
<li>digest</li>
<li>io-nonblock</li>
<li>io-wait</li>
<li>nkf</li>
<li>pathname</li>
<li>syslog</li>
<li>win32ole</li>
</ul>
</li>
</ul>
<p>Voir <a href="https://github.com/ruby/ruby/blob/v3_0_0/NEWS.md">NEWS</a>
ou les <a href="https://github.com/ruby/ruby/compare/v2_7_0...v3_0_0">logs de commit</a>
pour plus de détails.</p>
<p>Avec ces changements, <a href="https://github.com/ruby/ruby/compare/v2_7_0...v3_0_0#file_bucket">4028 fichiers changés, 200058 insertions(+), 154063 suppressions(-)</a>
depuis Ruby 2.7.0!</p>
<blockquote>
<p>Ruby3.0 est une étape importante. Le langage évolue en restant compatible. Mais ce n'est pas la fin. Ruby continuera à progresser et deviendra encore plus grand. Restez à l'écoute ! --- Matz</p>
</blockquote>
<p>Joyeux Noël, bonnes vacances, et profitez de la programmation avec Ruby 3.0!</p>
<h2>Téléchargement</h2>
<ul>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/3.0/ruby-3.0.0.tar.gz">https://cache.ruby-lang.org/pub/ruby/3.0/ruby-3.0.0.tar.gz</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE: 19539509
SHA1: 233873708c1ce9fdc295e0ef1c25e64f9b98b062
SHA256: a13ed141a1c18eb967aac1e33f4d6ad5f21be1ac543c344e0d6feeee54af8e28
SHA512: e62f4f63dc12cff424e8a09adc06477e1fa1ee2a9b2b6e28ca22fd52a211e8b8891c0045d47935014a83f2df2d6fc7c8a4fd87f01e63c585afc5ef753e1dd1c1
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/3.0/ruby-3.0.0.tar.xz">https://cache.ruby-lang.org/pub/ruby/3.0/ruby-3.0.0.tar.xz</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE: 14374176
SHA1: c142899d70a1326c5a71311b17168f98c15e5d89
SHA256: 68bfaeef027b6ccd0032504a68ae69721a70e97d921ff328c0c8836c798f6cb1
SHA512: 2a23c2894e62e24bb20cec6b2a016b66d7df05083668726b6f70af8338211cfec417aa3624290d1f5ccd130f65ee7b52b5db7d428abc4a9460459c9a5dd1a450
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/3.0/ruby-3.0.0.zip">https://cache.ruby-lang.org/pub/ruby/3.0/ruby-3.0.0.zip</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE: 23862057
SHA1: 2a9629102d71c7fe7f31a8c91f64e570a40d093c
SHA256: a5e4fa7dc5434a7259e9a29527eeea2c99eeb5e82708f66bb07731233bc860f4
SHA512: e5bf742309d79f05ec1bd1861106f4b103e4819ca2b92a826423ff451465b49573a917cb893d43a98852435966323e2820a4b9f9377f36cf771b8c658f80fa5b
</code></pre></div></div>
</li>
</ul>
<h2>Ruby, c'est quoi ?</h2>
<p>Ruby a été initialement développé par Matz (Yukihiro Matsumoto) en 1993 puis est devenu open source. Il fonctionne sur de nombreuses plates-formes et est utilisé partout dans le monde, en particulier pour le développement web.</p>

  </div>
</div>
<hr class="hidden-modern" />

<div id="sidebar-wrapper">
  <div id="sidebar">
    <div class="navigation">
      

      <h3><strong>Actualité récente</strong></h3>

      <ul class="menu">
        
        <li><a href="/fr/news/2022/02/18/ruby-3-1-1-released/">Ruby 3.1.1 est disponible</a></li>
        
        <li><a href="/fr/news/2021/12/25/ruby-3-1-0-released/">Ruby 3.1.0 est disponible</a></li>
        
        <li><a href="/fr/news/2021/11/24/ruby-3-0-3-released/">Ruby 3.0.3 est disponible</a></li>
        
        <li><a href="/fr/news/2021/11/24/ruby-2-7-5-released/">Ruby 2.7.5 est disponible</a></li>
        
        <li><a href="/fr/news/2021/11/24/ruby-2-6-9-released/">Ruby 2.6.9 est disponible</a></li>
        
      </ul>
    </div>

    

    <h3>Syndication</h3>
    <p><a href="/fr/feeds/news.rss">Actualité récente (RSS)</a></p>
  </div>
</div>
<hr class="hidden-modern" />

        </div>
      </div>
    </div>

    <div class="container">
      <div id="footer">
        <div class="site-links">
          

  <a href="/fr/" class="home">Home</a>

  <a href="/fr/downloads/">Téléchargements</a>

  <a href="/fr/documentation/">Documentation</a>

  <a href="/fr/libraries/">Bibliothèques</a>

  <a href="/fr/community/">Communauté</a>

  <a href="/fr/news/">Actualités</a>

  <a href="/fr/security/">Sécurité</a>

  <a href="/fr/about/">À propos de Ruby</a>


        </div>

        <p>

  Autres langues disponibles :

<a href="/bg/">Български</a>,
<a href="/de/">Deutsch</a>,
<a href="/en/">English</a>,
<a href="/es/">Español</a>,
<a href="/fr/">Français</a>,
<a href="/id/">Bahasa Indonesia</a>,
<a href="/it/">Italiano</a>,
<a href="/ja/">日本語</a>,
<a href="/ko/">한국어</a>,
<a href="/pl/">polski</a>,
<a href="/pt/">Português</a>,
<a href="/ru/">Русский</a>,
<a href="/tr/">Türkçe</a>,
<a href="/vi/">Tiếng Việt</a>,
<a href="/zh_cn/">简体中文</a>,
<a href="/zh_tw/">繁體中文</a>.
</p>

        
  <p>Ce site est propulsé par Ruby et <a href="http://www.jekyllrb.com/">Jekyll</a>. Il est fièrement maintenu par des membres de la communauté Ruby. Contribuez en vous rendant sur <a href="https://github.com/ruby/www.ruby-lang.org/">GitHub</a> ou contactez le <a href="mailto:webmaster@ruby-lang.org">webmaster</a> pour toute question ou tout commentaire.</p>


      </div>
    </div>
  </body>
</html>
