<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    
    <title>Official Ruby FAQ</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta itemprop="image" content="https://www.ruby-lang.org/images/header-ruby-logo@2x.png">
    
    <meta name="description" content="">
    

    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygments.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css">
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic&amp;subset=latin,cyrillic,greek,vietnamese' rel='stylesheet' type='text/css'>
    <link rel="canonical" href="https://www.ruby-lang.org/en/documentation/faq/8/">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link href="/en/feeds/news.rss" rel="alternate" title="Recent News (RSS)" type="application/rss+xml">


    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/page.js"></script>
    
  </head>

  

  <body>
    <div id="header">
      <div id="header_content" class="container">
        <a href="/en/">
          <h1>Ruby</h1>
          <h2>A Programmer's Best Friend</h2>
        </a>

        <div class="site-links">
          

  <a href="/en/" class="home">Home</a>

  <a href="/en/downloads/">Downloads</a>

  <a href="/en/documentation/">Documentation</a>

  <a href="/en/libraries/">Libraries</a>

  <a href="/en/community/">Community</a>

  <a href="/en/news/">News</a>

  <a href="/en/security/">Security</a>

  <a href="/en/about/">About Ruby</a>


          <a href="#" class="menu selected">Menu</a>
        </div>

        <div id="search-box">
          
<form id="search-form" action="https://www.google.com/cse">
  <table class="fieldset">
    <tr>
      <td>
        <input class="field" type="text" name="q" size="31" style="background: white url(//www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(//www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat'"/>
      </td>
      <td>
        <input type="hidden" name="cx" value="013598269713424429640:g5orptiw95w" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input class="button" type="submit" name="sa" value="Search" />
      </td>
    </tr>
  </table>
</form>

        </div>
      </div>
    </div>

    <div id="page">
      


      <div id="main-wrapper" class="container">
        <div id="main">
          <div id="content-wrapper">
  
<!-- raw HTML omitted -->




  <div id="content">
    <p><em>If you wish to report errors or suggest improvements for this FAQ,
please go to our
<a href="https://github.com/ruby/www.ruby-lang.org/">GitHub repository</a>
and open an issue or pull request.</em></p>
<h2>Classes and modules</h2>
<h3>Can a class definition be repeated?</h3>
<p>A class can be defined repeatedly. Each definition is added to the last
definition. If a method is redefined, the former one is overridden and lost.</p>
<h3>Are there class variables?</h3>
<p>There are. A variable prefixed with two at signs (<code>@@</code>) is a class variable,
accessible within both instance and class methods of the class.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Entity

  @@instances = 0

  def initialize
    @@instances += 1
    @number = @@instances
  end

  def who_am_i
   "I'm #{@number} of #{@@instances}"
  end

  def self.total
    @@instances
  end
end

entities = Array.new(9) { Entity.new }

entities[6].who_am_i  # =&gt; "I'm 7 of 9"
Entity.total          # =&gt; 9
</code></pre></div></div>
<p>However, you probably should use <em>class instance variables</em> instead.</p>
<h3>What is a class instance variable?</h3>
<p>Here the example of the previous section rewritten
using a class instance variable:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Entity

  @instances = 0

  class &lt;&lt; self
    attr_accessor :instances  # provide class methods for reading/writing
  end

  def initialize
    self.class.instances += 1
    @number = self.class.instances
  end

  def who_am_i
   "I'm #{@number} of #{self.class.instances}"
  end

  def self.total
    @instances
  end
end

entities = Array.new(9) { Entity.new }

entities[6].who_am_i  # =&gt; "I'm 7 of 9"
Entity.instances      # =&gt; 9
Entity.total          # =&gt; 9
</code></pre></div></div>
<p>Here, <code>@instances</code> is a <em>class</em> instance variable. It does not belong
to an instance of class <code>Entity</code>, but to the class object <code>Entity</code>,
which is an instance of class <code>Class</code>.</p>
<p>Class instance variables are directly accessible only within class methods
of the class.</p>
<h3>What is the difference between class variables and class instance variables?</h3>
<p>The main difference is the behavior concerning inheritance:
class variables are shared between a class and all its subclasses,
while class instance variables only belong to one specific class.</p>
<p>Class variables in some way can be seen as global variables within
the context of an inheritance hierarchy, with all the problems
that come with global variables.
For instance, a class variable might (accidentally) be reassigned
by any of its subclasses, affecting all other classes:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Woof

  @@sound = "woof"

  def self.sound
    @@sound
  end
end

Woof.sound  # =&gt; "woof"

class LoudWoof &lt; Woof
  @@sound = "WOOF"
end

LoudWoof.sound  # =&gt; "WOOF"
Woof.sound      # =&gt; "WOOF" (!)
</code></pre></div></div>
<p>Or, an ancestor class might later be reopened and changed,
with possibly surprising effects:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Foo

  @@var = "foo"

  def self.var
    @@var
  end
end

Foo.var  # =&gt; "foo" (as expected)

class Object
  @@var = "object"
end

Foo.var  # =&gt; "object" (!)
</code></pre></div></div>
<p>So, unless you exactly know what you are doing and explicitly need
this kind of behavior, you better should use class instance variables.</p>
<h3>Does Ruby have class methods?</h3>
<p>{: #class-method}</p>
<p>A <a href="../7/#singleton-method">singleton method</a> of a class object is called a
class method.
(Actually, the class method is defined in the metaclass, but that is pretty
much transparent). Another way of looking at it is to say that a class method
is a method whose receiver is a class.</p>
<p>It all comes down to the fact that you can call class methods without having
to have instances of that class (objects) as the receiver.</p>
<p>Let's create a singleton method of class <code>Foo</code>:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Foo
  def self.test
    "this is foo"
  end
end

# It is invoked this way.

Foo.test  # =&gt; "this is foo"
</code></pre></div></div>
<p>In this example, <code>Foo.test</code> is a class method.</p>
<p>Instance methods which are defined in class <code>Class</code> can be used
as class methods for every(!) class.</p>
<h3>What is a singleton class?</h3>
<p>A singleton class is an anonymous class that is created by subclassing the
class associated with a particular object. Singleton classes are another
way of extending the functionality associated with just one object.</p>
<p>Take the lowly <code>Foo</code>:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Foo
  def hello
    "hello"
  end
end

foo = Foo.new
foo.hello  # =&gt; "hello"
</code></pre></div></div>
<p>Now let's say we need to add class-level functionality to just this one
instance:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class &lt;&lt; foo
  attr_accessor :name

  def hello
    "hello, I'm #{name}"
  end
end

foo.name = "Tom"
foo.hello         # =&gt; "hello, I'm Tom"
Foo.new.hello     # =&gt; "hello"
</code></pre></div></div>
<p>We've customized <code>foo</code> without changing the characteristics of <code>Foo</code>.</p>
<h3>What is a module function?</h3>
<!-- raw HTML omitted -->
<p>A module function is a private, singleton method defined in a module.
In effect, it is similar to a <a href="#class-method">class method</a>,
in that it can be called using the <code>Module.method</code> notation:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Math.sqrt(2)  # =&gt; 1.414213562
</code></pre></div></div>
<p>However, because modules can be mixed in to classes, module functions can
also be used without the prefix (that's how all those <code>Kernel</code> functions are
made available to objects):</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>include Math
sqrt(2)  # =&gt; 1.414213562
</code></pre></div></div>
<p>Use <code>module_function</code> to make a method a module function.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module Test
  def thing
    # ...
  end
  module_function :thing
end
</code></pre></div></div>
<h3>What is the difference between a class and a module?</h3>
<p>Modules are collections of methods and constants. They cannot generate
instances. Classes may generate instances (objects), and have per-instance
state (instance variables).</p>
<p>Modules may be mixed in to classes and other modules. The mixed in module's
constants and methods blend into that class's own, augmenting the class's
functionality. Classes, however, cannot be mixed in to anything.</p>
<p>A class may inherit from another class, but not from a module.</p>
<p>A module may not inherit from anything.</p>
<h3>Can you subclass modules?</h3>
<p>No. However, a module may be included in a class or another module to mimic
multiple inheritance (the mixin facility).</p>
<p>This does not generate a subclass (which would require inheritance), but does
generate an <code>is_a?</code> relationship between the class and the module.</p>
<h3>Give me an example of a mixin</h3>
<p>The module <code>Comparable</code> provides a variety of comparison operators
(<code>&lt;</code>, <code>&lt;=</code>, <code>==</code>, <code>&gt;=</code>, <code>&gt;</code>, <code>between?</code>). It defines these in terms
of calls to the general comparison method, <code>&lt;=&gt;</code>. However, it does
not itself define <code>&lt;=&gt;</code>.</p>
<p>Say you want to create a class where comparisons are based on the number of
legs an animal has:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Animal
  include Comparable

  attr_reader :legs

  def initialize(name, legs)
    @name, @legs = name, legs
  end

  def &lt;=&gt;(other)
    legs &lt;=&gt; other.legs
  end

  def inspect
    @name
  end
end

c = Animal.new("cat", 4)
s = Animal.new("snake", 0)
p = Animal.new("parrot", 2)

c &lt; s             # =&gt; false
s &lt; c             # =&gt; true
p &gt;= s            # =&gt; true
p.between?(s, c)  # =&gt; true
[p, s, c].sort    # =&gt; [snake, parrot, cat]
</code></pre></div></div>
<p>All <code>Animal</code> must do is define its own semantics for the operator <code>&lt;=&gt;</code>,
and mix in the <code>Comparable</code> module. <code>Comparable</code>'s methods now become
indistinguishable from <code>Animal</code>'s and your class suddenly sprouts new
functionality. And because the same <code>Comparable</code> module is used by many
classes, your new class will share a consistent and well understood semantics.</p>
<h3>Why are there two ways of defining class methods?</h3>
<p>You can define a class method in the class definition, and you can define
a class method at the top level.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Demo
  def self.class_method
  end
end

def Demo.another_class_method
end
</code></pre></div></div>
<p>There is only one significant difference between the two.
In the class definition you can refer to the class's constants directly,
as the constants are within scope. At the top level, you have to use the
<code>Class::CONST</code> notation.</p>
<h3>What is the difference between <code>include</code> and <code>extend</code>?</h3>
<!-- raw HTML omitted -->
<p><code>include</code> mixes a module into a class or another module. Methods from that
module are called function-style (without a receiver).</p>
<p><code>extend</code> is used to include a module in an object (instance).
Methods in the module become methods in the object.</p>
<h3>What does <code>self</code> mean?</h3>
<p><code>self</code> is the currently executing receiver, the object to which a method
is applied. A function-style method call implies <code>self</code> as the receiver.</p>

  </div>
</div>
<hr class="hidden-modern" />

<div id="sidebar-wrapper">
  <div id="sidebar">
    




<div class="navigation">
  <h3><strong>Get Started</strong>, it's easy!</h3>

  <ul class="menu">
    <li><a href="https://try.ruby-lang.org/">Try Ruby! (in your browser)</a></li>

    
    <li><a href="/en/documentation/quickstart/">Ruby in Twenty Minutes</a></li>
    

    
    <li><a href="/en/documentation/ruby-from-other-languages/">Ruby from Other Languages</a></li>
    
  </ul>
</div>



<div class="navigation">
  <h3><strong>Explore</strong> a new world…</h3>
  <ul class="menu">
    
    <li><a href="/en/documentation/">Documentation</a></li>
    

    

    
    <li><a href="https://rubybib.org/">Academic Research</a></li>
    

    
    <li><a href="/en/libraries/">Libraries</a></li>
    

    
    <li><a href="/en/documentation/success-stories/">Success Stories</a></li>
    
  </ul>
</div>



<div class="navigation">
  <h3><strong>Participate</strong> in a friendly and growing community.</h3>
  <ul>
    
    <li><a href="/en/community/mailing-lists/">Mailing Lists</a>: Talk about Ruby with programmers from all around the world.</li>
    

    
    <li><a href="/en/community/user-groups/">User Groups</a>: Get in contact with Rubyists in your area.</li>
    

    
    <li><a href="/en/community/weblogs/">Blogs</a>: Read about what’s happening right now in the Ruby community.</li>
    

    
    <li><a href="/en/community/ruby-core/">Ruby Core</a>: Help polish the rough edges of the latest Ruby.</li>
    

    
    <li><a href="https://bugs.ruby-lang.org/">Issue Tracking</a>: Report or help solve issues in Ruby.</li>
    
  </ul>
</div>






    <h3>Syndicate</h3>
    <p><a href="/en/feeds/news.rss">Recent News (RSS)</a></p>


  </div>
</div>
<hr class="hidden-modern" />

        </div>
      </div>
    </div>

    <div class="container">
      <div id="footer">
        <div class="site-links">
          

  <a href="/en/" class="home">Home</a>

  <a href="/en/downloads/">Downloads</a>

  <a href="/en/documentation/">Documentation</a>

  <a href="/en/libraries/">Libraries</a>

  <a href="/en/community/">Community</a>

  <a href="/en/news/">News</a>

  <a href="/en/security/">Security</a>

  <a href="/en/about/">About Ruby</a>


        </div>

        <p>

  This site in other languages:

<a href="/bg/">Български</a>,
<a href="/de/">Deutsch</a>,
<a href="/en/">English</a>,
<a href="/es/">Español</a>,
<a href="/fr/">Français</a>,
<a href="/id/">Bahasa Indonesia</a>,
<a href="/it/">Italiano</a>,
<a href="/ja/">日本語</a>,
<a href="/ko/">한국어</a>,
<a href="/pl/">polski</a>,
<a href="/pt/">Português</a>,
<a href="/ru/">Русский</a>,
<a href="/tr/">Türkçe</a>,
<a href="/vi/">Tiếng Việt</a>,
<a href="/zh_cn/">简体中文</a>,
<a href="/zh_tw/">繁體中文</a>.
</p>

        
  <p><a href="/en/about/website/">This website</a> is proudly maintained by members of the Ruby community.</p>


      </div>
    </div>
  </body>
</html>
