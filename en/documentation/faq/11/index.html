<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    
    <title>Official Ruby FAQ</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta itemprop="image" content="https://www.ruby-lang.org/images/header-ruby-logo@2x.png">
    
    <meta name="description" content="">
    

    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygments.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css">
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic&amp;subset=latin,cyrillic,greek,vietnamese' rel='stylesheet' type='text/css'>
    <link rel="canonical" href="https://www.ruby-lang.org/en/documentation/faq/11/">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link href="/en/feeds/news.rss" rel="alternate" title="Recent News (RSS)" type="application/rss+xml">


    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/page.js"></script>
    
  </head>

  

  <body>
    <div id="header">
      <div id="header_content" class="container">
        <a href="/en/">
          <h1>Ruby</h1>
          <h2>A Programmer's Best Friend</h2>
        </a>

        <div class="site-links">
          

  <a href="/en/" class="home">Home</a>

  <a href="/en/downloads/">Downloads</a>

  <a href="/en/documentation/">Documentation</a>

  <a href="/en/libraries/">Libraries</a>

  <a href="/en/community/">Community</a>

  <a href="/en/news/">News</a>

  <a href="/en/security/">Security</a>

  <a href="/en/about/">About Ruby</a>


          <a href="#" class="menu selected">Menu</a>
        </div>

        <div id="search-box">
          
<form id="search-form" action="https://www.google.com/cse">
  <table class="fieldset">
    <tr>
      <td>
        <input class="field" type="text" name="q" size="31" style="background: white url(//www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(//www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat'"/>
      </td>
      <td>
        <input type="hidden" name="cx" value="013598269713424429640:g5orptiw95w" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input class="button" type="submit" name="sa" value="Search" />
      </td>
    </tr>
  </table>
</form>

        </div>
      </div>
    </div>

    <div id="page">
      


      <div id="main-wrapper" class="container">
        <div id="main">
          <div id="content-wrapper">
  
<!-- raw HTML omitted -->




  <div id="content">
    <p><em>If you wish to report errors or suggest improvements for this FAQ,
please go to our
<a href="https://github.com/ruby/www.ruby-lang.org/">GitHub repository</a>
and open an issue or pull request.</em></p>
<h2>Other features</h2>
<h3>What does <code>a ? b : c</code> mean?</h3>
<p>This is the so-called “ternary operator” and is the same as saying
<code>if a then b else c end</code>.</p>
<h3>How can I count the number of lines in a file?</h3>
<p>The following code may give the fastest result.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>File.readlines("example").size  # =&gt; 3
</code></pre></div></div>
<h3>What do <code>MatchData#begin</code> and <code>MatchData#end</code> return?</h3>
<p>They act with <code>$~</code>, and return the start index and the end index of
the matched data in the original string. See an example in
<a href="../9/#tab-expansion">tab expansion</a>.</p>
<h3>How can I sum the elements in an array?</h3>
<!-- raw HTML omitted -->
<p>Rather than solve the specific problem, let's solve the general case.
The first thing we will do is produce a method that will iterate over
an <code>Enumerable</code> object and collect a single result. Smalltalk calls that
method inject, so we will too:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module Enumerable

  # inject(n) {|n, i| ...}
  def inject(n)
    each {|i| n = yield(n, i) }

    n
  end
end
</code></pre></div></div>
<p>Notice how we have added the method to <code>Enumerable</code>. This means that anything
that includes Enumerable can now use <code>inject</code>. But how do we use it? It takes
a single argument <code>n</code> and a block. For each element in the thing being
enumerated, it calls the block, passing in <code>n</code> and the element itself.
The result of the block is assigned back to <code>n</code>. So, to define <code>sum</code>,
we could write:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module Enumerable
  def sum
    inject(0) {|n, i| n + i }
  end
end

[1,3,5,7,9].sum  # =&gt; 25
(1..100).sum     # =&gt; 5050
</code></pre></div></div>
<h3>How can I use continuations?</h3>
<!-- raw HTML omitted -->
<p>Ruby's continuations allow you to create an object representing a place in a
Ruby program, and then return to that place at any time (even if it has
apparently gone out of scope). Continuations can be used to implement complex
control structures, but are typically more useful as ways of confusing people.</p>
<p>In <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/4482">[ruby-talk:4482]</a>, Jim Weirich posted the following
examples of continuations:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># --------------------------------------------------------------------
# Simple Producer/Consumer
# --------------------------------------------------------------------
# Connect a simple counting task and a printing task together using
# continuations.
#
# Usage:  count(limit)

def count_task(count, consumer)
  (1..count).each do |i|
    callcc {|cc| consumer.call cc, i }
  end
  nil
end

def print_task()
  producer, i = callcc { |cc| return cc }
  print "#{i} "
  callcc { |cc| producer.call }
end

def count(limit)
  count_task(limit, print_task())
  print "\n"
end
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># --------------------------------------------------------------------
# Filtering Out Multiples of a Given Number
# --------------------------------------------------------------------
# Create a filter that is both a consumer and producer. Insert it
# between the counting task and the printing task.
#
# Usage:  omit(2, limit)

def filter_task(factor, consumer)
  producer, i = callcc { |cc| return cc }
  if (i%factor) != 0 then
    callcc { |cc| consumer.call cc, i }
  end
  producer.call
end

def omit(factor, limit)
  printer = print_task()
  filter = filter_task(factor, printer)
  count_task(limit, filter)
  print "\n"
end
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># --------------------------------------------------------------------
# Prime Number Generator
# --------------------------------------------------------------------
# Create a prime number generator. When a new prime number is
# discovered, dynamically add a new multiple filter to the chain of
# producers and consumers.
#
# Usage:  primes(limit)

def prime_task(consumer)
  producer, i = callcc { |cc| return cc }
  if i &gt;= 2 then
    callcc { |cc| consumer.call cc, i }
    consumer = filter_task(i, consumer)
  end
  producer.call
end

def primes(limit)
  printer = print_task()
  primes = prime_task(printer)
  count_task(limit, primes)
  print "\n"
end
</code></pre></div></div>

  </div>
</div>
<hr class="hidden-modern" />

<div id="sidebar-wrapper">
  <div id="sidebar">
    




<div class="navigation">
  <h3><strong>Get Started</strong>, it's easy!</h3>

  <ul class="menu">
    <li><a href="https://try.ruby-lang.org/">Try Ruby! (in your browser)</a></li>

    
    <li><a href="/en/documentation/quickstart/">Ruby in Twenty Minutes</a></li>
    

    
    <li><a href="/en/documentation/ruby-from-other-languages/">Ruby from Other Languages</a></li>
    
  </ul>
</div>



<div class="navigation">
  <h3><strong>Explore</strong> a new world…</h3>
  <ul class="menu">
    
    <li><a href="/en/documentation/">Documentation</a></li>
    

    

    
    <li><a href="https://rubybib.org/">Academic Research</a></li>
    

    
    <li><a href="/en/libraries/">Libraries</a></li>
    

    
    <li><a href="/en/documentation/success-stories/">Success Stories</a></li>
    
  </ul>
</div>



<div class="navigation">
  <h3><strong>Participate</strong> in a friendly and growing community.</h3>
  <ul>
    
    <li><a href="/en/community/mailing-lists/">Mailing Lists</a>: Talk about Ruby with programmers from all around the world.</li>
    

    
    <li><a href="/en/community/user-groups/">User Groups</a>: Get in contact with Rubyists in your area.</li>
    

    
    <li><a href="/en/community/weblogs/">Blogs</a>: Read about what’s happening right now in the Ruby community.</li>
    

    
    <li><a href="/en/community/ruby-core/">Ruby Core</a>: Help polish the rough edges of the latest Ruby.</li>
    

    
    <li><a href="https://bugs.ruby-lang.org/">Issue Tracking</a>: Report or help solve issues in Ruby.</li>
    
  </ul>
</div>






    <h3>Syndicate</h3>
    <p><a href="/en/feeds/news.rss">Recent News (RSS)</a></p>


  </div>
</div>
<hr class="hidden-modern" />

        </div>
      </div>
    </div>

    <div class="container">
      <div id="footer">
        <div class="site-links">
          

  <a href="/en/" class="home">Home</a>

  <a href="/en/downloads/">Downloads</a>

  <a href="/en/documentation/">Documentation</a>

  <a href="/en/libraries/">Libraries</a>

  <a href="/en/community/">Community</a>

  <a href="/en/news/">News</a>

  <a href="/en/security/">Security</a>

  <a href="/en/about/">About Ruby</a>


        </div>

        <p>

  This site in other languages:

<a href="/bg/">Български</a>,
<a href="/de/">Deutsch</a>,
<a href="/en/">English</a>,
<a href="/es/">Español</a>,
<a href="/fr/">Français</a>,
<a href="/id/">Bahasa Indonesia</a>,
<a href="/it/">Italiano</a>,
<a href="/ja/">日本語</a>,
<a href="/ko/">한국어</a>,
<a href="/pl/">polski</a>,
<a href="/pt/">Português</a>,
<a href="/ru/">Русский</a>,
<a href="/tr/">Türkçe</a>,
<a href="/vi/">Tiếng Việt</a>,
<a href="/zh_cn/">简体中文</a>,
<a href="/zh_tw/">繁體中文</a>.
</p>

        
  <p><a href="/en/about/website/">This website</a> is proudly maintained by members of the Ruby community.</p>


      </div>
    </div>
  </body>
</html>
