<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    
    <title>Ruby 2.6.0-preview2 Released</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta itemprop="image" content="https://www.ruby-lang.org/images/header-ruby-logo@2x.png">
    
    <meta name="description" content="">
    

    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygments.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css">
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic&amp;subset=latin,cyrillic,greek,vietnamese' rel='stylesheet' type='text/css'>
    <link rel="canonical" href="https://www.ruby-lang.org/en/news/2018/05/31/ruby-2-6-0-preview2-released/">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link href="/en/feeds/news.rss" rel="alternate" title="Recent News (RSS)" type="application/rss+xml">


    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/page.js"></script>
    
  </head>

  

  <body>
    <div id="header">
      <div id="header_content" class="container">
        <a href="/en/">
          <h1>Ruby</h1>
          <h2>A Programmer's Best Friend</h2>
        </a>

        <div class="site-links">
          

  <a href="/en/" class="home">Home</a>

  <a href="/en/downloads/">Downloads</a>

  <a href="/en/documentation/">Documentation</a>

  <a href="/en/libraries/">Libraries</a>

  <a href="/en/community/">Community</a>

  <a href="/en/news/">News</a>

  <a href="/en/security/">Security</a>

  <a href="/en/about/">About Ruby</a>


          <a href="#" class="menu selected">Menu</a>
        </div>

        <div id="search-box">
          
<form id="search-form" action="https://www.google.com/cse">
  <table class="fieldset">
    <tr>
      <td>
        <input class="field" type="text" name="q" size="31" style="background: white url(//www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(//www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat'"/>
      </td>
      <td>
        <input type="hidden" name="cx" value="013598269713424429640:g5orptiw95w" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input class="button" type="submit" name="sa" value="Search" />
      </td>
    </tr>
  </table>
</form>

        </div>
      </div>
    </div>

    <div id="page">
      


      <div id="main-wrapper" class="container">
        <div id="main">
          

<div id="content-wrapper">
  
<h1>Ruby 2.6.0-preview2 Released</h1>



  <div id="content">
    <p class="post-info">Posted by naruse on 31 May 2018</p>

    <p>We are pleased to announce the release of Ruby 2.6.0-preview2.</p>
<p>Ruby 2.6.0-preview2 is the second preview toward Ruby 2.6.0.
This preview2 is released earlier than usual because it includes an important new feature, JIT.</p>
<h2>JIT</h2>
<p>Ruby 2.6 introduces an initial implementation of JIT (Just-in-time) compiler.</p>
<p>JIT compiler aims to improve performance of any Ruby program execution.
Unlike ordinary JIT compilers for other languages, Ruby's JIT compiler does JIT compilation in a unique way, which prints C code to a disk and spawns common C compiler process to generate native code.
See also: <a href="https://github.com/vnmakarov/ruby/tree/rtl_mjit_branch#mjit-organization">MJIT organization by Vladimir Makarov</a>.</p>
<p>How to use: Just specify <code>--jit</code> in command line or <code>$RUBYOPT</code> environment variable.
Specifying <code>--jit-verbose=1</code> allows to print basic information of ongoing JIT compilation. See <code>ruby --help</code> for other options.</p>
<p>The main purpose of this JIT release is to provide a chance to check if it works for your platform and to find out security risks before the 2.6 release.
Currently JIT compiler is supported only when Ruby is built by gcc or clang and the compiler is available on runtime. Otherwise you can't use it for now.</p>
<p>As of 2.6.0-preview2, we're just preparing infrastructure for JIT and very few optimizations are implemented.
You can measure some of potential improvements in micro benchmarks with this release, but it is NOT ready for benchmarking final performance of Ruby's JIT compiler, especially for larger programs like Rails applications.</p>
<p>We're going to implement method iniling in JIT compiler, which is expected to increase Ruby's performance in order of magnitude.
Also, we're planning to increase the supported platforms, and the next plan is to support Visual Studio.</p>
<p>Stay tuned for the new age of Ruby's performance.</p>
<h2>RubyVM::AST [Experimental]</h2>
<p>Ruby 2.6 introduces <code>RubyVM::AST</code> module.</p>
<p>This module has <code>parse</code> method which parses a given ruby code of string and returns AST (Abstract Syntax Tree) nodes, and <code>parse_file</code> method which parses a given ruby code file and returns AST nodes.</p>
<p><code>RubyVM::AST::Node</code> class is also introduced you can get location information and children nodes from <code>Node</code> objects. This feature is experimental. Compatibility of the structure of AST nodes are not guaranteed.</p>
<h2>New Features</h2>
<ul>
<li>
<p>Add a new alias <code>then</code> to <code>Kernel#yield_self</code>. <a href="https://bugs.ruby-lang.org/issues/14594">[Feature #14594]</a></p>
</li>
<li>
<p><code>else</code> without <code>rescue</code> now causes a syntax error.  [EXPERIMENTAL]</p>
</li>
<li>
<p>constant names may start with a non-ASCII capital letter. <a href="https://bugs.ruby-lang.org/issues/13770">[Feature #13770]</a></p>
</li>
<li>
<p>endless range <a href="https://bugs.ruby-lang.org/issues/12912">[Feature #12912]</a></p>
<p>An endless range, <code>(1..)</code>, is introduced. It works as it has no end. This shows typical use cases:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ary[1..]                          # identical to ary[1..-1] without magical -1
(1..).each {|index| ... }         # inifinite loop from index 1
ary.zip(1..) {|elem, index| ... } # ary.each.with_index(1) { ... }
</code></pre></div></div>
</li>
<li>
<p>Add <code>Binding#source_location</code>.  <a href="https://bugs.ruby-lang.org/issues/14230">[Feature #14230]</a></p>
<p>This method returns the source location of binding, a 2-element array of <code>__FILE__</code> and <code>__LINE__</code>.  Traditionally, the same information could be retrieved by <code>eval(&quot;[__FILE__, __LINE__]&quot;, binding)</code>, but we are planning to change this behavior so that <code>Kernel#eval</code> ignores binding's source location <a href="https://bugs.ruby-lang.org/issues/4352">[Bug #4352]</a>.  So, users should use this newly-introduced method instead of <code>Kernel#eval</code>.</p>
</li>
<li>
<p>Add <code>:exception</code> option to let <code>Kernel.#system</code> raise error instead of returning <code>false</code>.  <a href="https://bugs.ruby-lang.org/issues/14386">[Feature #14386]</a></p>
</li>
</ul>
<h2>Performance improvements</h2>
<ul>
<li>
<p>Speedup <code>Proc#call</code> because we dont' need to care about <code>$SAFE</code> any more.
<a href="https://bugs.ruby-lang.org/issues/14318">[Feature #14318]</a></p>
<p>With <code>lc_fizzbuzz</code> benchmark which uses <code>Proc#call</code> so many times we can measure
x1.4 improvements <a href="https://bugs.ruby-lang.org/issues/10212">[Bug #10212]</a>.</p>
</li>
<li>
<p>Speedup <code>block.call</code> where <code>block</code> is passed block parameter. <a href="https://bugs.ruby-lang.org/issues/14330">[Feature #14330]</a></p>
<p>Ruby 2.5 improves block passing performance. <a href="https://bugs.ruby-lang.org/issues/14045">[Feature #14045]</a>
Additionally, Ruby 2.6 improves the performance of passed block calling.
With micro-benchmark we can observe x2.6 improvement.</p>
</li>
</ul>
<h2>Other notable changes since 2.5</h2>
<ul>
<li>
<p><code>$SAFE</code> is a process global state and we can set <code>0</code> again.  <a href="https://bugs.ruby-lang.org/issues/14250">[Feature #14250]</a></p>
</li>
<li>
<p>Passing <code>safe_level</code> to <code>ERB.new</code> is deprecated. <code>trim_mode</code> and <code>eoutvar</code> arguments are changed to keyword arguments. <a href="https://bugs.ruby-lang.org/issues/14256">[Feature #14256]</a></p>
</li>
<li>
<p>Merge RubyGems 3.0.0.beta1</p>
</li>
</ul>
<p>See <a href="https://github.com/ruby/ruby/blob/v2_6_0_preview2/NEWS">NEWS</a>
or the <a href="https://github.com/ruby/ruby/compare/v2_5_0...v2_6_0_preview2">commit logs</a>
for details.</p>
<p>With those changes,
<a href="https://github.com/ruby/ruby/compare/v2_5_0...v2_6_0_preview2">4699 files changed, 45744 insertions(+), 30885 deletions(-)</a>
since Ruby 2.5.0!</p>
<p>Enjoy programming with Ruby 2.6.0-preview2!</p>
<h2>Download</h2>
<ul>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview2.tar.gz">https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview2.tar.gz</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE:   16170732 bytes
SHA1:   6867b00e81af0b70fcb6f1aa7fc22d89d48a7d12
SHA256: ee15ab35f17c942b1f41bd792f2494f639affff6e03babf44708b72fdbb6de34
SHA512: 95c5a277785dfeb3006503e1b9ccccefdf6ce29669d4576f0191ee6986ba0e3567fbbed18a8d2b1f147d637434e4a3a4fdf47d84995e10ad4a354950e9092690
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview2.zip">https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview2.zip</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE:   19850776 bytes
SHA1:   eba80a09b552ce3142fd571ff5867a13736d170e
SHA256: 97fc187b90570fce110d22803a319ab04e68700692b2b6b4e9961886f1a931e5
SHA512: d5501819635bda64ac3dc717815652b692302b44a7cdf4c08edfa5cb9ec7f79a70fffc534879b316a4a9584825ed3c0948667beae2d7c313de58583931b981f4
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview2.tar.bz2">https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview2.tar.bz2</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE:   14209461 bytes
SHA1:   a9b1b4f359601b94b3f5b77115fcbf3790ff69cd
SHA256: d8ede03d5ad3abd9d2c81cf0ad17a41d22b747c003cc16fd59befb2aaf48f0b2
SHA512: 3872227e9b1c97c206d19bf1e6ce15a38ee15a26c431b4436605dea67affcf16372358984df76b35e7abaa902c15c16f533ac7af47e3031dea9451bbe459b693
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview2.tar.xz">https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview2.tar.xz</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE:   11525372 bytes
SHA1:   e795abe1a4f828b3d851f7148b4bf6c9d9a7e7fd
SHA256: 00ddfb5e33dee24469dd0b203597f7ecee66522ebb496f620f5815372ea2d3ec
SHA512: bef3e90e97d6e58889cd500c591c579b728ca5833022b690182c0bf4d661e437b3a2ca33470dac35fcf693897819b9d7f500c0f71b707e2fcdcb0644028f2c03
</code></pre></div></div>
</li>
</ul>

  </div>
</div>
<hr class="hidden-modern" />

<div id="sidebar-wrapper">
  <div id="sidebar">
    <div class="navigation">
      

      <h3><strong>Recent News</strong></h3>

      <ul class="menu">
        
        <li><a href="/en/news/2022/12/25/ruby-3-2-0-released/">Ruby 3.2.0 Released</a></li>
        
        <li><a href="/en/news/2022/12/06/ruby-3-2-0-rc1-released/">Ruby 3.2.0 RC 1 Released</a></li>
        
        <li><a href="/en/news/2022/11/24/ruby-3-1-3-released/">Ruby 3.1.3 Released</a></li>
        
        <li><a href="/en/news/2022/11/24/ruby-3-0-5-released/">Ruby 3.0.5 Released</a></li>
        
        <li><a href="/en/news/2022/11/24/ruby-2-7-7-released/">Ruby 2.7.7 Released</a></li>
        
      </ul>
    </div>

    

    <h3>Syndicate</h3>
    <p><a href="/en/feeds/news.rss">Recent News (RSS)</a></p>
  </div>
</div>
<hr class="hidden-modern" />

        </div>
      </div>
    </div>

    <div class="container">
      <div id="footer">
        <div class="site-links">
          

  <a href="/en/" class="home">Home</a>

  <a href="/en/downloads/">Downloads</a>

  <a href="/en/documentation/">Documentation</a>

  <a href="/en/libraries/">Libraries</a>

  <a href="/en/community/">Community</a>

  <a href="/en/news/">News</a>

  <a href="/en/security/">Security</a>

  <a href="/en/about/">About Ruby</a>


        </div>

        <p>

  This site in other languages:

<a href="/bg/">Български</a>,
<a href="/de/">Deutsch</a>,
<a href="/en/">English</a>,
<a href="/es/">Español</a>,
<a href="/fr/">Français</a>,
<a href="/id/">Bahasa Indonesia</a>,
<a href="/it/">Italiano</a>,
<a href="/ja/">日本語</a>,
<a href="/ko/">한국어</a>,
<a href="/pl/">polski</a>,
<a href="/pt/">Português</a>,
<a href="/ru/">Русский</a>,
<a href="/tr/">Türkçe</a>,
<a href="/vi/">Tiếng Việt</a>,
<a href="/zh_cn/">简体中文</a>,
<a href="/zh_tw/">繁體中文</a>.
</p>

        
  <p><a href="/en/about/website/">This website</a> is proudly maintained by members of the Ruby community.</p>


      </div>
    </div>
  </body>
</html>
