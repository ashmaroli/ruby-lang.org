<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    
    <title>Ruby 2.6.0-preview3 Released</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta itemprop="image" content="https://www.ruby-lang.org/images/header-ruby-logo@2x.png">
    
    <meta name="description" content="">
    

    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygments.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css">
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic&amp;subset=latin,cyrillic,greek,vietnamese' rel='stylesheet' type='text/css'>
    <link rel="canonical" href="https://www.ruby-lang.org/en/news/2018/11/06/ruby-2-6-0-preview3-released/">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link href="/en/feeds/news.rss" rel="alternate" title="Recent News (RSS)" type="application/rss+xml">


    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/page.js"></script>
    
  </head>

  

  <body>
    <div id="header">
      <div id="header_content" class="container">
        <a href="/en/">
          <h1>Ruby</h1>
          <h2>A Programmer's Best Friend</h2>
        </a>

        <div class="site-links">
          

  <a href="/en/" class="home">Home</a>

  <a href="/en/downloads/">Downloads</a>

  <a href="/en/documentation/">Documentation</a>

  <a href="/en/libraries/">Libraries</a>

  <a href="/en/community/">Community</a>

  <a href="/en/news/">News</a>

  <a href="/en/security/">Security</a>

  <a href="/en/about/">About Ruby</a>


          <a href="#" class="menu selected">Menu</a>
        </div>

        <div id="search-box">
          
<form id="search-form" action="https://www.google.com/cse">
  <table class="fieldset">
    <tr>
      <td>
        <input class="field" type="text" name="q" size="31" style="background: white url(//www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(//www.google.com/coop/intl/en/images/google_custom_search_watermark.gif) left no-repeat'"/>
      </td>
      <td>
        <input type="hidden" name="cx" value="013598269713424429640:g5orptiw95w" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input class="button" type="submit" name="sa" value="Search" />
      </td>
    </tr>
  </table>
</form>

        </div>
      </div>
    </div>

    <div id="page">
      


      <div id="main-wrapper" class="container">
        <div id="main">
          

<div id="content-wrapper">
  
<h1>Ruby 2.6.0-preview3 Released</h1>



  <div id="content">
    <p class="post-info">Posted by naruse on 6 Nov 2018</p>

    <p>We are pleased to announce the release of Ruby 2.6.0-preview3.</p>
<p>Ruby 2.6.0-preview3 is the third preview toward Ruby 2.6.0.
This preview3 is released to test new features before coming Release Candidate.</p>
<h2>JIT</h2>
<p>Ruby 2.6 introduces an initial implementation of JIT (Just-in-time) compiler.</p>
<p>JIT compiler aims to improve performance of any Ruby program execution.
Unlike ordinary JIT compilers for other languages, Ruby's JIT compiler does JIT compilation in a unique way, which prints C code to a disk and spawns common C compiler process to generate native code.
See also: <a href="https://github.com/vnmakarov/ruby/tree/rtl_mjit_branch#mjit-organization">MJIT organization by Vladimir Makarov</a>.</p>
<p>How to use: Just specify <code>--jit</code> in command line or <code>$RUBYOPT</code> environment variable.
Specifying <code>--jit-verbose=1</code> allows to print basic information of ongoing JIT compilation. See <code>ruby --help</code> for other options.</p>
<p>The main purpose of this JIT release is to provide a chance to check if it works for your platform and to find out security risks before the 2.6 release.
JIT compiler is supported when Ruby is built by GCC, Clang, or Microsoft VC++, which needs to be available on runtime. Otherwise you can't use it for now.</p>
<p>As of Ruby 2.6.0 preview3, we achieved 1.7x faster performance than Ruby 2.5 on CPU-intensive non-trivial benchmark workload called Optcarrot <a href="https://gist.github.com/k0kubun/d7f54d96f8e501bbbc78b927640f4208">https://gist.github.com/k0kubun/d7f54d96f8e501bbbc78b927640f4208</a>. We're going to improve the performance on memory-intensive workload like Rails application as well.</p>
<p>Stay tuned for the new age of Ruby's performance.</p>
<h2>RubyVM::AST [Experimental]</h2>
<p>Ruby 2.6 introduces <code>RubyVM::AST</code> module.</p>
<p>This module has <code>parse</code> method which parses a given ruby code of string and returns AST (Abstract Syntax Tree) nodes, and <code>parse_file</code> method which parses a given ruby code file and returns AST nodes.
<code>RubyVM::AST::Node</code> class is also introduced. You can get location information and children nodes from <code>Node</code> objects. This feature is experimental. Compatibility of the structure of AST nodes are not guaranteed.</p>
<h2>New Features</h2>
<ul>
<li>
<p>Add a new alias <code>then</code> to <code>Kernel#yield_self</code>. <a href="https://bugs.ruby-lang.org/issues/14594">[Feature #14594]</a></p>
</li>
<li>
<p><code>else</code> without <code>rescue</code> now causes a syntax error.  [EXPERIMENTAL]</p>
</li>
<li>
<p>constant names may start with a non-ASCII capital letter. <a href="https://bugs.ruby-lang.org/issues/13770">[Feature #13770]</a></p>
</li>
<li>
<p>endless range <a href="https://bugs.ruby-lang.org/issues/12912">[Feature #12912]</a></p>
<p>An endless range, <code>(1..)</code>, is introduced. It works as it has no end. This shows typical use cases:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ary[1..]                          # identical to ary[1..-1] without magical -1
(1..).each {|index| ... }         # inifinite loop from index 1
ary.zip(1..) {|elem, index| ... } # ary.each.with_index(1) { ... }
</code></pre></div></div>
</li>
<li>
<p>Add <code>Binding#source_location</code>.  <a href="https://bugs.ruby-lang.org/issues/14230">[Feature #14230]</a></p>
<p>This method returns the source location of binding, a 2-element array of <code>__FILE__</code> and <code>__LINE__</code>.  Traditionally, the same information could be retrieved by <code>eval(&quot;[__FILE__, __LINE__]&quot;, binding)</code>, but we are planning to change this behavior so that <code>Kernel#eval</code> ignores binding's source location <a href="https://bugs.ruby-lang.org/issues/4352">[Bug #4352]</a>.  So, users should use this newly-introduced method instead of <code>Kernel#eval</code>.</p>
</li>
<li>
<p>Add <code>:exception</code> option to let <code>Kernel.#system</code> raise error instead of returning <code>false</code>.  <a href="https://bugs.ruby-lang.org/issues/14386">[Feature #14386]</a></p>
</li>
</ul>
<h2>Performance improvements</h2>
<ul>
<li>
<p>Speedup <code>Proc#call</code> because we don't need to care about <code>$SAFE</code> any more.
<a href="https://bugs.ruby-lang.org/issues/14318">[Feature #14318]</a></p>
<p>With <code>lc_fizzbuzz</code> benchmark which uses <code>Proc#call</code> so many times we can measure
x1.4 improvements <a href="https://bugs.ruby-lang.org/issues/10212">[Bug #10212]</a>.</p>
</li>
<li>
<p>Speedup <code>block.call</code> where <code>block</code> is passed block parameter. <a href="https://bugs.ruby-lang.org/issues/14330">[Feature #14330]</a></p>
<p>Ruby 2.5 improves block passing performance. <a href="https://bugs.ruby-lang.org/issues/14045">[Feature #14045]</a>
Additionally, Ruby 2.6 improves the performance of passed block calling.
With micro-benchmark we can observe x2.6 improvement.</p>
</li>
<li>
<p>Transient Heap (theap) is introduced. [Bug #14858] [Feature #14989]
theap is managed heap for short-living memory objects which are pointed by
specific classes (Array, Hash, Object, and Struct). For example, making small
and short-living Hash object is x2 faster. With rdoc benchmark, we observed
6-7% performance improvement.</p>
</li>
</ul>
<h2>Other notable changes since 2.5</h2>
<ul>
<li>
<p><code>$SAFE</code> is a process global state and we can set <code>0</code> again.  <a href="https://bugs.ruby-lang.org/issues/14250">[Feature #14250]</a></p>
</li>
<li>
<p>Passing <code>safe_level</code> to <code>ERB.new</code> is deprecated. <code>trim_mode</code> and <code>eoutvar</code> arguments are changed to keyword arguments. <a href="https://bugs.ruby-lang.org/issues/14256">[Feature #14256]</a></p>
</li>
<li>
<p>Merge RubyGems 3.0.0.beta2. <code>--ri</code> and <code>--rdoc</code> options was removed. Please use <code>--document</code> and <code>--no-document</code> options instead of them.</p>
</li>
<li>
<p>Merge <a href="https://github.com/bundler/bundler">Bundler</a> as Default gems.</p>
</li>
</ul>
<p>See <a href="https://github.com/ruby/ruby/blob/v2_6_0_preview3/NEWS">NEWS</a>
or the <a href="https://github.com/ruby/ruby/compare/v2_5_0...v2_6_0_preview3">commit logs</a>
for details.</p>
<p>With those changes,
<a href="https://github.com/ruby/ruby/compare/v2_5_0...v2_6_0_preview3">6474 files changed, 171888 insertions(+), 46617 deletions(-)</a>
since Ruby 2.5.0!</p>
<p>Enjoy programming with Ruby 2.6.0-preview3!</p>
<h2>Download</h2>
<ul>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview3.tar.gz">https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview3.tar.gz</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE:   17071670 bytes
SHA1:   67836fda11fa91e0b988a6cc07989fbceda025b4
SHA256: 60243e3bd9661e37675009ab66ba63beacf5dec748885b9b93916909f965f27a
SHA512: 877278cd6e9b947f5bb6ed78136efb232dcc9c5c218b7236576171e7c3cd7f6b7d10d07d8402014a14aba1fcd1913a4370f0725c561ead41d8a3fe92029f7f76
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview3.zip">https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview3.zip</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE:   21537655 bytes
SHA1:   45f3c90dfffe03b746f21f24152666e361cbb41a
SHA256: 9152af9e700349dcfa2eec196dd91587d42d70a6837fa2c415ebba1167587be1
SHA512: 335de36cf56706326f4acc4bbd35be01e0ac5fff30d0a69b2e1630ba4c78f0e711822d1623d0099a517c824b154917d2f60be192dfb143a422cf1d17b38e1183
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview3.tar.bz2">https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview3.tar.bz2</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE:   14973451 bytes
SHA1:   5f2df5d8c5a3888ccb915d36a3532ba32cda8791
SHA256: 1f09a2ac1ab26721923cbf4b9302a66d36bb302dc45e72112b41d6fccc5b5931
SHA512: d1693625723796e8902f3e4c4fae444f2912af9173489f7cf18c99db2a217afc971b082fce7089e39f8edd54d762d2b4e72843c8306ed29b05ccb15ac03dbb5b
</code></pre></div></div>
</li>
<li>
<p><a href="https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview3.tar.xz">https://cache.ruby-lang.org/pub/ruby/2.6/ruby-2.6.0-preview3.tar.xz</a></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SIZE:   12291692 bytes
SHA1:   7f8216247745215e9645568e7a02140f9a029b31
SHA256: 9856d9e0e32df9e5cdf01928eec363d037f1a76dab2abbf828170647beaf64fe
SHA512: b4d3b17ecf96272c43cd7518c0b54dee63fc1150ad143e1d9c9d708506fe78676c80eb96cc47b8d46d1128bd483a53f16c944963a03d1f99f00131b74714df7b
</code></pre></div></div>
</li>
</ul>

  </div>
</div>
<hr class="hidden-modern" />

<div id="sidebar-wrapper">
  <div id="sidebar">
    <div class="navigation">
      

      <h3><strong>Recent News</strong></h3>

      <ul class="menu">
        
        <li><a href="/en/news/2022/12/25/ruby-3-2-0-released/">Ruby 3.2.0 Released</a></li>
        
        <li><a href="/en/news/2022/12/06/ruby-3-2-0-rc1-released/">Ruby 3.2.0 RC 1 Released</a></li>
        
        <li><a href="/en/news/2022/11/24/ruby-3-1-3-released/">Ruby 3.1.3 Released</a></li>
        
        <li><a href="/en/news/2022/11/24/ruby-3-0-5-released/">Ruby 3.0.5 Released</a></li>
        
        <li><a href="/en/news/2022/11/24/ruby-2-7-7-released/">Ruby 2.7.7 Released</a></li>
        
      </ul>
    </div>

    

    <h3>Syndicate</h3>
    <p><a href="/en/feeds/news.rss">Recent News (RSS)</a></p>
  </div>
</div>
<hr class="hidden-modern" />

        </div>
      </div>
    </div>

    <div class="container">
      <div id="footer">
        <div class="site-links">
          

  <a href="/en/" class="home">Home</a>

  <a href="/en/downloads/">Downloads</a>

  <a href="/en/documentation/">Documentation</a>

  <a href="/en/libraries/">Libraries</a>

  <a href="/en/community/">Community</a>

  <a href="/en/news/">News</a>

  <a href="/en/security/">Security</a>

  <a href="/en/about/">About Ruby</a>


        </div>

        <p>

  This site in other languages:

<a href="/bg/">Български</a>,
<a href="/de/">Deutsch</a>,
<a href="/en/">English</a>,
<a href="/es/">Español</a>,
<a href="/fr/">Français</a>,
<a href="/id/">Bahasa Indonesia</a>,
<a href="/it/">Italiano</a>,
<a href="/ja/">日本語</a>,
<a href="/ko/">한국어</a>,
<a href="/pl/">polski</a>,
<a href="/pt/">Português</a>,
<a href="/ru/">Русский</a>,
<a href="/tr/">Türkçe</a>,
<a href="/vi/">Tiếng Việt</a>,
<a href="/zh_cn/">简体中文</a>,
<a href="/zh_tw/">繁體中文</a>.
</p>

        
  <p><a href="/en/about/website/">This website</a> is proudly maintained by members of the Ruby community.</p>


      </div>
    </div>
  </body>
</html>
