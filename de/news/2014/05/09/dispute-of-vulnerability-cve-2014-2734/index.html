<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    
    <title>Anfechtung der Sicherheitslücke CVE-2014-2734</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta itemprop="image" content="https://www.ruby-lang.org/images/header-ruby-logo@2x.png">
    
    <meta name="description" content="">
    

    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygments.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css">
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic&amp;subset=latin,cyrillic,greek,vietnamese' rel='stylesheet' type='text/css'>
    <link rel="canonical" href="https://www.ruby-lang.org/de/news/2014/05/09/dispute-of-vulnerability-cve-2014-2734/">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link href="/de/feeds/news.rss" rel="alternate" title="Aktuelle Neuigkeiten (RSS)" type="application/rss+xml">


    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/page.js"></script>
    
  </head>

  

  <body>
    <div id="header">
      <div id="header_content" class="container">
        <a href="/de/">
          <h1>Ruby</h1>
          <h2>Der beste Freund eines Programmierers</h2>
        </a>

        <div class="site-links">
          

  <a href="/de/" class="home">Home</a>

  <a href="/de/downloads/">Downloads</a>

  <a href="/de/documentation/">Dokumentation</a>

  <a href="/de/libraries/">Bibliotheken</a>

  <a href="/de/community/">Community</a>

  <a href="/de/news/">Neuigkeiten</a>

  <a href="/de/security/">Sicherheit</a>

  <a href="/de/about/">Über Ruby</a>


          <a href="#" class="menu selected">Menu</a>
        </div>

        <div id="search-box">
          
<form id="search-form" action="https://www.google.com/cse">
  <table class="fieldset">
    <tr>
      <td>
        <input class="field" type="text" name="q" size="31" style="background: white url(//www.google.com/coop/intl/de/images/google_custom_search_watermark.gif) left no-repeat" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(//www.google.com/coop/intl/de/images/google_custom_search_watermark.gif) left no-repeat'"/>
      </td>
      <td>
        <input type="hidden" name="cx" value="008918821236166936739:xplclbf3sh0" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input class="button" type="submit" name="sa" value="Suche" />
      </td>
    </tr>
  </table>
</form>

        </div>
      </div>
    </div>

    <div id="page">
      


      <div id="main-wrapper" class="container">
        <div id="main">
          

<div id="content-wrapper">
  
<h1>Anfechtung der Sicherheitslücke CVE-2014-2734</h1>



  <div id="content">
    <p class="post-info">Geschrieben von emboss am 9.5.2014<br>
                         Übersetzt von Quintus</p>

    <p>Wir sind vor kurzem über eine Sicherheitslücke informiert worden, die
als
<a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2014-2734">CVE-2014-2734</a>
veröffentlicht wurde. Aufgrund unserer unten dargelegten
detaillierten Analyse glauben wir jedoch <strong>nicht</strong>, dass Ruby
verwundbar ist.</p>
<p>Diese Sicherheitslücke kann es einem Angreifer ermöglichen, beliebige
Wurzelzertifikate zu fälschen, wobei er effektiv den privaten
Schlüssel des Originalzertifikats durch seinen eigenen ersetzt.</p>
<h2>Proof of Concept</h2>
<p>Folgend finden Sie unsere Analyse von CVE-2014-2734; wir konnten den
ursprünglichen Nachweis auf diesen unserer Meinung nach den Kern des
Problems beschreibenden Code reduzieren:</p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted -->forge_key<!-- raw HTML omitted --> <!-- raw HTML omitted -->=<!-- raw HTML omitted --> <!-- raw HTML omitted -->OpenSSL<!-- raw HTML omitted --><!-- raw HTML omitted -->::<!-- raw HTML omitted --><!-- raw HTML omitted -->PKey<!-- raw HTML omitted --><!-- raw HTML omitted -->::<!-- raw HTML omitted --><!-- raw HTML omitted -->RSA<!-- raw HTML omitted --><!-- raw HTML omitted -->.<!-- raw HTML omitted --><!-- raw HTML omitted -->new<!-- raw HTML omitted --><!-- raw HTML omitted -->(<!-- raw HTML omitted --><!-- raw HTML omitted -->2048<!-- raw HTML omitted --><!-- raw HTML omitted -->)<!-- raw HTML omitted -->
<!-- raw HTML omitted -->raw_certificate<!-- raw HTML omitted --> <!-- raw HTML omitted -->=<!-- raw HTML omitted --> <!-- raw HTML omitted -->File<!-- raw HTML omitted --><!-- raw HTML omitted -->.<!-- raw HTML omitted --><!-- raw HTML omitted -->read<!-- raw HTML omitted --><!-- raw HTML omitted -->(<!-- raw HTML omitted --><!-- raw HTML omitted -->&quot;arbitrary.cer&quot;<!-- raw HTML omitted --><!-- raw HTML omitted -->)<!-- raw HTML omitted -->
<!-- raw HTML omitted -->cert<!-- raw HTML omitted --> <!-- raw HTML omitted -->=<!-- raw HTML omitted --> <!-- raw HTML omitted -->OpenSSL<!-- raw HTML omitted --><!-- raw HTML omitted -->::<!-- raw HTML omitted --><!-- raw HTML omitted -->X509<!-- raw HTML omitted --><!-- raw HTML omitted -->::<!-- raw HTML omitted --><!-- raw HTML omitted -->Certificate<!-- raw HTML omitted --><!-- raw HTML omitted -->.<!-- raw HTML omitted --><!-- raw HTML omitted -->new<!-- raw HTML omitted --><!-- raw HTML omitted -->(<!-- raw HTML omitted --><!-- raw HTML omitted -->raw_certificate<!-- raw HTML omitted --><!-- raw HTML omitted -->)<!-- raw HTML omitted -->
<!-- raw HTML omitted -->resigned_cert<!-- raw HTML omitted --> <!-- raw HTML omitted -->=<!-- raw HTML omitted --> <!-- raw HTML omitted -->cert<!-- raw HTML omitted --><!-- raw HTML omitted -->.<!-- raw HTML omitted --><!-- raw HTML omitted -->sign<!-- raw HTML omitted --><!-- raw HTML omitted -->(<!-- raw HTML omitted --><!-- raw HTML omitted -->spoof<!-- raw HTML omitted --><!-- raw HTML omitted -->,<!-- raw HTML omitted --> <!-- raw HTML omitted -->OpenSSL<!-- raw HTML omitted --><!-- raw HTML omitted -->::<!-- raw HTML omitted --><!-- raw HTML omitted -->Digest<!-- raw HTML omitted --><!-- raw HTML omitted -->::<!-- raw HTML omitted --><!-- raw HTML omitted -->SHA1<!-- raw HTML omitted --><!-- raw HTML omitted -->.<!-- raw HTML omitted --><!-- raw HTML omitted -->new<!-- raw HTML omitted --><!-- raw HTML omitted -->)<!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted -->resigned_cert<!-- raw HTML omitted --><!-- raw HTML omitted -->.<!-- raw HTML omitted --><!-- raw HTML omitted -->verify<!-- raw HTML omitted --><!-- raw HTML omitted -->(<!-- raw HTML omitted --><!-- raw HTML omitted -->key<!-- raw HTML omitted --><!-- raw HTML omitted -->)<!-- raw HTML omitted --> <!-- raw HTML omitted -->#=&gt; true<!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p>Es mag überraschend erscheinen, dass <code>X590Certificate#verify</code> den
Wert <code>true</code> zurückgibt. Das Originalzertifikat kann eine
<a href="http://tools.ietf.org/html/rfc5280#section-4.1.2.7">Subject Public Key Info</a>
enthalten, die auf den ursprünglichen öffentlichen Schlüssel verweist, der sich
von <code>forge_key</code> unterscheidet. Augenscheinlich handelt es sich bei dem
Schlüsselpaar, mit dem das Zertifikat neu signiert wurde, nicht mehr um
das in der Subject Public Key Info referenzierte Schlüsselpaar.
Weshalb also ergibt <code>#verify</code> den Wert <code>true</code>?</p>
<h3>Wie Schlüssel verifiziert werden</h3>
<p><code>X509Certificate#verify</code> bedient sich OpenSSLs
<a href="https://github.com/openssl/openssl/blob/master/crypto/x509/x_all.c#L74"><code>X509_verify</code></a>-Funktion,
welche wiederum an
<a href="https://github.com/openssl/openssl/blob/master/crypto/asn1/a_verify.c#L134"><code>ASN1_item_verify</code></a>
delegiert. Diese beiden Funktionen stellen die Gültigkeit der Signatur
anhand des angegebenen öffentlichen Schlüssels sicher. Sie verifizieren
jedoch <strong>nicht</strong>, ob der angegebene Schlüssel mit demjenigen, der im
Zertifikat referenziert wird, übereinstimmt. Daraus folgt, dass die
Rückgabe von <code>true</code> in diesem Szenario das für
<code>X590Certificate#verify</code> erwartete Verhalten ist. Das Auslassen dieser
Prüfung hat keine wesentlichen Auswirkungen auf die Gesamtsicherheit
des X.590-Vertrauensmodells.</p>
<p>Abschnitt 4.1.1.3 von RFC 5280 stellt ausdrücklich fest, dass die CA bei der
Berechnung einer Zertifikatssignatur die Richtigkeit der im Zertifikat
enthaltenen Informationen zu bestätigen hat. Zwar wird dieses Prinzip
durch den obigen Beispielcode verletzt, jedoch stellt dies keine
Bedrohung der Sicherheit da. Ein in dieser Weise gefälschtes oder
verändertes Zertifikat kann nicht benutzt werden, solange niemand Sie
dazu bringt, einem dieses Prinzip verletzenden Zertifikat zu vertrauen.</p>
<h2>Potenzielle Risiken</h2>
<p>Es gibt zwei Fälle zu beachten:</p>
<h3>Neusignierung eines Wurzelzertifikats</h3>
<p>Als Nutzer vertrauen wir den Wurzelzertifikaten
uneingeschränkt. Selbst dann, wenn sie keine gültigen Informationen
enthalten, hat dies auf ihren Status als öffentlich beglaubigtes
Wurzelzertifikat keinerlei Einfluss. Es handelt sich um
vorkonfigurierte Werte in den Vertrauensdatenbanken unserer Browser
und Betriebssysteme, durch ihre bloße Verarbeitung kommt ihr Status
als gültiger Vertrauensanker zustande. Beispielsweise überprüft nicht
einmal OpenSSL selbst standardmäßig die Signatur eines selbstsignierten
Wurzelzertifikats aus denselben Gründen,
vgl. die <a href="https://www.openssl.org/docs/crypto/X509_VERIFY_PARAM_set_flags.html">Dokumentation zu X509_V_FLAG_CHECK_SS_SIGNATURE</a>.</p>
<p>Ein neu signiertes Wurzelzertifikat wird zu einem de facto
selbstsignierten Zertifikat (wenn auch mit falscher Subject Public Key Info).
Dies ist nicht gefährlicher als ein gewöhnliches
selbstsigniertes Wurzelzertifikat. Tatsächlich ist es jedermann
möglich, ein selbstsigniertes Wurzelzertifikat zu erstellen, das mit
einem gültigen Wurzelzertifikat vollständig übereinstimmt — außer in der
Signatur. Da wir Wurzelzertifikaten bereits durch Besitz vertrauen,
ist ein derartig verändertes Zertifikat ohne die explizite Zustimmung des
Clients zum Vertrauen bedeutungslos.</p>
<h3>Neusignierung eines Zwischen- oder Blattzertifikats</h3>
<p>Auch die Neusignierung eines Nicht-Wurzel-Zertifikats verletzt nicht
das X.590-Vertrauensmodell. Zwar besitzen wir diese Zertifikate
üblicherweise nicht im Voraus, jedoch würde deren Fälschung beim
<a href="http://tools.ietf.org/html/rfc5280#section-6">Pfadvalidierungsprozess</a>
auffallen. Hierbei wird die Signatur jedes Nicht-Wurzel-Zertifikats
anhand des öffentlichen Schlüssels des beglaubigenden Zertifikats
überprüft; an irgendeinem Punkt der Zertifikatskette würde eine
Fälschung zwingend in der Form einer ungültigen Zertifikatssignatur
auftreten.</p>
<h2>Zusammenfassung</h2>
<p>Unterm Strich glauben wir, dass sich <code>X509Certificate#verify</code> so
verhält wie erwartet. Unabhängig davon sind andere bereits
<a href="https://github.com/adrienthebo/cve-2014-2734/">zum selben Ergebnis gekommen</a>,
weshalb wir CVE-2014-2734 angefochten und seinen Widerruf beantragt
haben. Sie können die
<a href="https://gist.github.com/emboss/91696b56cd227c8a0c13">vollständige Analyse und das ursprüngliche Proof of Concept</a>
samt Kommentaren ebenfalls einsehen.</p>

  </div>
</div>
<hr class="hidden-modern" />

<div id="sidebar-wrapper">
  <div id="sidebar">
    <div class="navigation">
      

      <h3><strong>Aktuelle Neuigkeiten</strong></h3>

      <ul class="menu">
        
        <li><a href="/de/news/2020/12/25/ruby-3-0-0-released/">Ruby 3.0.0 veröffentlicht</a></li>
        
        <li><a href="/de/news/2020/12/20/ruby-3-0-0-rc1-released/">Ruby 3.0.0 RC1 veröffentlicht</a></li>
        
        <li><a href="/de/news/2020/12/08/ruby-3-0-0-preview2-released/">Ruby 3.0.0 Preview 2 veröffentlicht</a></li>
        
        <li><a href="/de/news/2020/10/02/ruby-2-7-2-released/">Ruby 2.7.2 veröffentlicht</a></li>
        
        <li><a href="/de/news/2020/09/29/http-request-smuggling-cve-2020-25613/">CVE-2020-25613: Sicherheitslücke: Schmuggeln von Requests in WEBrick möglich</a></li>
        
      </ul>
    </div>

    

    <h3>Syndication</h3>
    <p><a href="/de/feeds/news.rss">Aktuelle Neuigkeiten (RSS)</a></p>
  </div>
</div>
<hr class="hidden-modern" />

        </div>
      </div>
    </div>

    <div class="container">
      <div id="footer">
        <div class="site-links">
          

  <a href="/de/" class="home">Home</a>

  <a href="/de/downloads/">Downloads</a>

  <a href="/de/documentation/">Dokumentation</a>

  <a href="/de/libraries/">Bibliotheken</a>

  <a href="/de/community/">Community</a>

  <a href="/de/news/">Neuigkeiten</a>

  <a href="/de/security/">Sicherheit</a>

  <a href="/de/about/">Über Ruby</a>


        </div>

        <p>

  Diese Website in anderen Sprachen:

<a href="/bg/">Български</a>,
<a href="/de/">Deutsch</a>,
<a href="/en/">English</a>,
<a href="/es/">Español</a>,
<a href="/fr/">Français</a>,
<a href="/id/">Bahasa Indonesia</a>,
<a href="/it/">Italiano</a>,
<a href="/ja/">日本語</a>,
<a href="/ko/">한국어</a>,
<a href="/pl/">polski</a>,
<a href="/pt/">Português</a>,
<a href="/ru/">Русский</a>,
<a href="/tr/">Türkçe</a>,
<a href="/vi/">Tiếng Việt</a>,
<a href="/zh_cn/">简体中文</a>,
<a href="/zh_tw/">繁體中文</a>.
</p>

        
  <p><a href="/de/about/website/">Diese Website</a> wird mit Stolz von Mitgliedern der Ruby-Community gepflegt.</p>


      </div>
    </div>
  </body>
</html>
