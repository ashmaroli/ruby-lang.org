<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    
    <title>Denial-of-Service-Attacke für Rubys Hash-Algorithmus gefunden (CVE-2011-4815)</title>
    

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta itemprop="image" content="https://www.ruby-lang.org/images/header-ruby-logo@2x.png">
    
    <meta name="description" content="">
    

    <link rel="stylesheet" type="text/css" href="/stylesheets/normalize.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/main.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygments.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/mobile.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css">
    <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic,700italic&amp;subset=latin,cyrillic,greek,vietnamese' rel='stylesheet' type='text/css'>
    <link rel="canonical" href="https://www.ruby-lang.org/de/news/2012/01/04/denial-of-service-attacke-fr-rubys-hash-algorithmus-gefunden-cve-2011-4815/">

    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    <link href="/de/feeds/news.rss" rel="alternate" title="Aktuelle Neuigkeiten (RSS)" type="application/rss+xml">


    <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
    <script type="text/javascript" src="/javascripts/page.js"></script>
    
  </head>

  

  <body>
    <div id="header">
      <div id="header_content" class="container">
        <a href="/de/">
          <h1>Ruby</h1>
          <h2>Der beste Freund eines Programmierers</h2>
        </a>

        <div class="site-links">
          

  <a href="/de/" class="home">Home</a>

  <a href="/de/downloads/">Downloads</a>

  <a href="/de/documentation/">Dokumentation</a>

  <a href="/de/libraries/">Bibliotheken</a>

  <a href="/de/community/">Community</a>

  <a href="/de/news/">Neuigkeiten</a>

  <a href="/de/security/">Sicherheit</a>

  <a href="/de/about/">Über Ruby</a>


          <a href="#" class="menu selected">Menu</a>
        </div>

        <div id="search-box">
          
<form id="search-form" action="https://www.google.com/cse">
  <table class="fieldset">
    <tr>
      <td>
        <input class="field" type="text" name="q" size="31" style="background: white url(//www.google.com/coop/intl/de/images/google_custom_search_watermark.gif) left no-repeat" onfocus="this.style.background='white'" onblur="if (/^\s*$/.test(this.value)) this.style.background='white url(//www.google.com/coop/intl/de/images/google_custom_search_watermark.gif) left no-repeat'"/>
      </td>
      <td>
        <input type="hidden" name="cx" value="008918821236166936739:xplclbf3sh0" />
        <input type="hidden" name="ie" value="UTF-8" />
        <input class="button" type="submit" name="sa" value="Suche" />
      </td>
    </tr>
  </table>
</form>

        </div>
      </div>
    </div>

    <div id="page">
      


      <div id="main-wrapper" class="container">
        <div id="main">
          

<div id="content-wrapper">
  
<h1>Denial-of-Service-Attacke für Rubys Hash-Algorithmus gefunden (CVE-2011-4815)</h1>



  <div id="content">
    <p class="post-info">Geschrieben von Quintus am 4.1.2012</p>

    <h2>Auswirkung</h2>
<p>Es handelt sich hierbei um etwas, das mit mathematischer Komplexität zu
tun hat. Es wurden speziell angefertige Folgen von Strings gefunden,
welche untereinander kollidierende Hashwerte besitzen. Mithilfe solcher
Aneinanderreihnungen ist es einem Angreifer etwa mithilfe von
POST-Parametern eines HTTP-Requests für eine Rails-Anwendung möglich,
eine Denial-Of-Service-Attacke durchzuführen.</p>
<h2>Detaillierte Beschreibung</h2>
<p>Das Problem ist dem 2003 in Perl gefundenen ähnlich. In Rubys
1.8er-Serie benutzen wir eine deterministische Hash-Funktion für
Strings, wobei »deterministisch« bedeutet, dass keine anderen
Informationen in die Berechnung des Hashwerts einfließen als der
Input-String selbst. Daher ist es möglich, den Hashwert eines Strings im
Vorhinein zu berechnen. Sammelt man nun eine Folge von Strings, welche
denselben Hashwert besitzen, ist es einem Angreifer möglich, einen
Ruby-Prozess zahlreiche Hashtabellen kollidieren zu lassen (das schließt
Instanzen der Klasse <code>Hash</code> mit ein). Die ungefähre Komplexität von
Hashtabllen liegt bei O(1), hängt jedoch von der gleichmäßigen
Verteilung der Hashwerte ab. Gibt man nun entsprechend angefertigten
Input, ist es einem Angreifer möglich, die Hashtabellen wesentlich
langsamer arbeiten zu lassen (genaugenommen O(n²), um eine n-elementige
Tabelle in diesem Falle zu erstellen).</p>
<h2>Betroffene Versionen</h2>
<ul>
<li>Ruby 1.8.7-p352 und alle vorangegangenen Versionen.</li>
<li>Alle Ruby-Versionen der 1.9er-Serie sind nicht von dieser Art von
Attacke betroffen. Sie nutzen eine andere Hash-Implementation als
Rubys 1.8er-Serie.</li>
</ul>
<h2>Lösung</h2>
<p>Unsere Lösung is es, die Hashfunktion für Strings mit ein paar durch
<!-- raw HTML omitted -->PRNG<!-- raw HTML omitted -->
generierten Werten aufzulockern, sodass der Hashwert eines Strings nicht
mehr länger deterministisch ist. Dies bedeutet, dass das Ergebnis von
<a href="http://ruby-doc.org/core-1.8.7/String.html#method-i-hash">String#hash</a> nur noch für die Laufzeit des aktuellen Prozesses
konsistent ist und nach dem nächsten Start eine andere Zahl generieren
wird. Will ein Angreifer dies umgehen, muss er eine Folge von Strings
erstellen, die gegen diese Art von Scrambling immun sind, was generell
für sehr schwierig gehalten wird.</p>
<p>Bitte aktualisieren Sie auf <a href="http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/391606">Ruby 1.8.7-p357</a>.</p>
<h2>Hinweise</h2>
<ul>
<li>Denken Sie bitte daran, dass diese Lösung nicht bedeutet, dass unser
Hashalgorithmus kryptographisch sicher ist. Um es einfach
auszudrücken: Wir haben die Hashtabelle gefixt, nicht aber die
Schwäche in String#hash. Ein Angreifer wird immer noch Erfolg haben,
wenn er/sie ein Paar von Strings und ihren von String#hash
zurückgegebenen Wert bekommt. Daher sollten Ausgaben von String#hash
nicht öffentlich werden. Wenn es wirklich sein muss, überlegen Sie, ob
Sie nicht sichere Hash-Algorithmen verwenden wollen, von denen einige
(wie z.B. SHA-256) auch in Rubys Standard Library enthalten sind.</li>
<li>Für diejenigen, die die alternativen Hash-Algorithmen in unserer
Code-Basis kennen: Wir unterstützen sie nicht (sie sind auch
standardmäßig deaktiviert). Wenn Sie einen von diesen wählen, nehmen
wir an, dass Sie C lesen können und verstehen, was mit dem
Standardalgorithmus falsch war. Stellen Sie sicher, dass Ihre Wahl
sicher ist—auf ihr eigenes Risiko.</li>
</ul>
<h2>Dank</h2>
<p>Dank geht an <a href="mailto:alexander.klink@nruns.com">Alexander Klink</a> und
<a href="mailto:jwaelde@cdc.informatik.tu-darmstadt.de">Julian Wälde</a>, die
dieses Problem gemeldet haben.</p>
<h2>Nachtrag</h2>
<ul>
<li><a href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-4815">CVE-2011-4815</a> befasst sich mit diesem Problem.</li>
<li>oCERT.org hat <a href="http://www.ocert.org/advisories/ocert-2011-003.html">einen Ratschlag</a> darüber veröffentlicht.</li>
<li>JRuby hat <a href="http://jruby.org/2011/12/27/jruby-1-6-5-1">Version 1.6.5.1</a> veröffentlicht, um einen identischen
Fehler zu korrigieren. Andere Ruby-Alternativen könnten ebenfalls
betroffen sein.</li>
<li>Der Twitter-Account <a href="https://twitter.com/#!/hashDoS">@hashDoS</a> sammelt informationen über
Hash-Kollisions-Attacken.</li>
</ul>

  </div>
</div>
<hr class="hidden-modern" />

<div id="sidebar-wrapper">
  <div id="sidebar">
    <div class="navigation">
      

      <h3><strong>Aktuelle Neuigkeiten</strong></h3>

      <ul class="menu">
        
        <li><a href="/de/news/2020/12/25/ruby-3-0-0-released/">Ruby 3.0.0 veröffentlicht</a></li>
        
        <li><a href="/de/news/2020/12/20/ruby-3-0-0-rc1-released/">Ruby 3.0.0 RC1 veröffentlicht</a></li>
        
        <li><a href="/de/news/2020/12/08/ruby-3-0-0-preview2-released/">Ruby 3.0.0 Preview 2 veröffentlicht</a></li>
        
        <li><a href="/de/news/2020/10/02/ruby-2-7-2-released/">Ruby 2.7.2 veröffentlicht</a></li>
        
        <li><a href="/de/news/2020/09/29/http-request-smuggling-cve-2020-25613/">CVE-2020-25613: Sicherheitslücke: Schmuggeln von Requests in WEBrick möglich</a></li>
        
      </ul>
    </div>

    

    <h3>Syndication</h3>
    <p><a href="/de/feeds/news.rss">Aktuelle Neuigkeiten (RSS)</a></p>
  </div>
</div>
<hr class="hidden-modern" />

        </div>
      </div>
    </div>

    <div class="container">
      <div id="footer">
        <div class="site-links">
          

  <a href="/de/" class="home">Home</a>

  <a href="/de/downloads/">Downloads</a>

  <a href="/de/documentation/">Dokumentation</a>

  <a href="/de/libraries/">Bibliotheken</a>

  <a href="/de/community/">Community</a>

  <a href="/de/news/">Neuigkeiten</a>

  <a href="/de/security/">Sicherheit</a>

  <a href="/de/about/">Über Ruby</a>


        </div>

        <p>

  Diese Website in anderen Sprachen:

<a href="/bg/">Български</a>,
<a href="/de/">Deutsch</a>,
<a href="/en/">English</a>,
<a href="/es/">Español</a>,
<a href="/fr/">Français</a>,
<a href="/id/">Bahasa Indonesia</a>,
<a href="/it/">Italiano</a>,
<a href="/ja/">日本語</a>,
<a href="/ko/">한국어</a>,
<a href="/pl/">polski</a>,
<a href="/pt/">Português</a>,
<a href="/ru/">Русский</a>,
<a href="/tr/">Türkçe</a>,
<a href="/vi/">Tiếng Việt</a>,
<a href="/zh_cn/">简体中文</a>,
<a href="/zh_tw/">繁體中文</a>.
</p>

        
  <p><a href="/de/about/website/">Diese Website</a> wird mit Stolz von Mitgliedern der Ruby-Community gepflegt.</p>


      </div>
    </div>
  </body>
</html>
